angular.module("rpGrid").run(["$templateCache",function(e){e.put("realpage/grid-pagination/templates/grid-pagination.html",'<div class="rp-grid-pagination" ng-class="{active: model.isActive}"><div class="rp-grid-pagination-inner"><p class="rp-grid-pagination-displaying">Displaying {{model.rangeStart}}-{{model.rangeEnd}} of {{model.dataCount}}</p><p class="rp-grid-pagination-controls prev"><span ng-class="{active: model.allowFirst}" ng-click="gridPagination.goToFirstPage()" class="rp-grid-pagination-control rp-grid-pagination-control-first"></span> <span ng-class="{active: model.allowPrev}" ng-click="gridPagination.goToPrevPageSet()" class="rp-grid-pagination-control rp-grid-pagination-control-prev"></span></p><ul class="rp-grid-pagination-pages"><li class="rp-grid-pagination-page" ng-repeat="page in model.pages" ng-class="{active: page.active}" ng-click="gridPagination.goToPage(page)">{{page.number + 1}}</li></ul><p class="rp-grid-pagination-controls"><span ng-class="{active: model.allowNext}" ng-click="gridPagination.goToNextPageSet()" class="rp-grid-pagination-control rp-grid-pagination-control-next"></span> <span ng-class="{active: model.allowLast}" ng-click="gridPagination.goToLastPage()" class="rp-grid-pagination-control rp-grid-pagination-control-last end"></span></p></div></div>')}]),function(e){"use strict";function t(){function e(e,t,a){var r={},n=e.model;r.init=function(){e.gridPagination=r},r.goToPage=function(e){e.active||n.goToPage(e)},r.goToFirstPage=function(){n.goToFirstPage()},r.goToPrevPageSet=function(){n.goToPrevPageSet()},r.goToNextPageSet=function(){n.goToNextPageSet()},r.goToLastPage=function(){n.goToLastPage()},r.init()}return{scope:{model:"="},link:e,restrict:"E",replace:!0,templateUrl:"realpage/grid-pagination/templates/grid-pagination.html"}}e.module("rpGrid").directive("rpGridPagination",[t])}(angular),function(e,t){"use strict";function a(a,r){function n(){this.init()}var i=n.prototype;return i.init=function(){var e=this;return e.config={currentPage:0,pagesPerGroup:5,recordsPerPage:2,currentPageGroup:0},e.data=[],e.pages=[],e.pageGroups=[],e.isActive=!1,e.allowPrev=!1,e.allowNext=!1,e.allowLast=!1,e.allowFirst=!1,e.trackingSelection=!1,e.selectionTracker=r(),e},i.setActivePage=function(){var e=this;return e.pages.forEach(function(t){t.active=t.number===e.config.currentPage}),e},i.setConfig=function(t){var a=this;return e.extend(a.config,t),a},i.setControls=function(){var e=this;return e.allowFirst=!(0===e.config.currentPageGroup&&0===e.config.currentPage),e.allowPrev=0!==e.config.currentPageGroup,e.allowNext=e.config.currentPageGroup!=e.pageGroups.length-1,e.allowLast=!(e.config.currentPageGroup===e.pageGroups.length-1&&e.config.currentPage===e.pages.last().number),e},i.setData=function(e){var a=this,r=e.length;return a._data===t&&(a._data=[].concat(e)),a.dataCount=r,a.data=[].concat(e),a.setPageGroups(r),a.isActive=0!==r,a.totalPages=Math.ceil(r/a.config.recordsPerPage),a.trackSelection&&a.selectionTracker.genIndex(e),a},i.setDataRange=function(){var e=this;return e.rangeStart=e.config.currentPage*e.config.recordsPerPage+1,e.rangeEnd=e.rangeStart+e.config.recordsPerPage-1,e.rangeEnd>e.dataCount&&(e.rangeEnd=e.dataCount),e},i.setGrid=function(e){var t=this;return t.grid=e,e.subscribe("sortBy",t.sort.bind(t)),e.subscribe("filterBy",t.filter.bind(t)),e.subscribe("selectChange",t.recordChanges.bind(t)),t},i.setGridData=function(){var e=this,t=e.getDataSlice();return e.grid.flushData().setData({records:t}),e},i.setPageGroup=function(){var e=this;return e.pages=e.pageGroups[e.config.currentPageGroup]||[],e},i.setPageGroups=function(e){var t=this,a=0,r=t.getMaxPages(),n=Math.ceil(e/(t.config.pagesPerGroup*t.config.recordsPerPage));for(t.pages=[],t.pageGroups=[];a<n;){var i=a*t.config.pagesPerGroup,o=(a+1)*t.config.pagesPerGroup;o>r&&(o=r);for(var g=[],s=0,c=i;c<o;c++)g.push({active:!1,number:a*t.config.pagesPerGroup+s++});t.pageGroups.push(g),a++}return t.setPageGroup(),t},i.getMaxPages=function(){var e=this;return Math.ceil(e.dataCount/e.config.recordsPerPage)},i.getSelectionChanges=function(){return this.selectionTracker.getSelectionChanges()},i.filter=function(e){var t=this,a=t.filterData(e);t.allowFirst=!0,t.setData(a),t.sortBy&&t.sort(t.sortBy),t.goToFirstPage()},i.sort=function(e){var t=this,a=t.sortData(e);t.sortBy=e,t.setData(a).setGridData()},i.sortData=function(e){var t=this,r=Object.keys(e)[0],n="ASC"!==e[r];return a("naturalSort")(t.data,r,n)},i.filterData=function(t){var r=this,n=r._data,i={};return e.forEach(t,function(e,t,a){var o=r.grid.getFilterByKey(t);o.hasCustomFilter()?n=o.getCustomFilter()(n,a):i[t]=e}),0===Object.keys(i).length?n:a("filter")(n,i)},i.getDataSlice=function(){var e=this,t=e.config.currentPage*e.config.recordsPerPage,a=t+e.config.recordsPerPage;return a>e.dataCount&&(a=e.dataCount),e.data.slice(t,a)},i.goToFirstPage=function(){var e=this;e.allowFirst&&(e.config.currentPage=0,e.config.currentPageGroup=0,e.setPageGroup().setDataRange().setControls().setActivePage().setGridData())},i.goToLastPage=function(){var e=this;e.allowLast&&(e.config.currentPageGroup=e.pageGroups.length-1,e.setPageGroup(),e.config.currentPage=e.pages.last().number,e.setDataRange().setControls().setActivePage().setGridData())},i.goToNextPageSet=function(){var e=this;if(e.allowNext){var t=e.getMaxPages()-1;e.config.currentPageGroup++,e.config.currentPage+=e.config.pagesPerGroup,e.config.currentPage>t&&(e.config.currentPage=t),e.setPageGroup().setDataRange().setControls().setActivePage().setGridData()}},i.goToPage=function(e){var t=this;t.config.currentPage=e.number,t.setPageGroup().setDataRange().setControls().setActivePage().setGridData()},i.goToPrevPageSet=function(){var e=this;e.allowPrev&&(e.config.currentPageGroup--,e.config.currentPage-=e.config.pagesPerGroup,e.setPageGroup().setDataRange().setControls().setActivePage().setGridData())},i.recordChanges=function(){var e=this;return e.trackSelection&&e.selectionTracker.recordChanges(e.grid.getData().records),e},i.trackSelection=function(e){var t=this;t.trackSelection=!0,t.selectionTracker.setConfig(e)},i.destroy=function(){var e=this;e.selectionTracker.destroy(),e.data=t,e.grid=t,e.pages=t,e.config=t,e.pageGroups=t,e.selectionTracker=t},function(){return new n}}e.module("rpGrid").factory("rpGridPaginationModel",["$filter","rpGridPaginationSelectionModel",a])}(angular),function(e,t){"use strict";function a(){function e(){this.init()}var a=e.prototype;return a.init=function(){var e=this;e.states={},e.config={},e.changes={selected:[],deselected:[]}},a.setConfig=function(e){var t=this;return t.config=e,t},a.getItemID=function(e){return e[this.config.idKey]},a.getItemSelState=function(e){return e[this.config.selectKey]},a.getSelectionChanges=function(){var e=this;return e.changes={selected:[],deselected:[]},Object.keys(e.states).forEach(function(t){var a=e.states[t],r=a.defSelState?"deselected":"selected";a.hasChanged&&e.changes[r].push(a.id)}),e.changes},a.genIndex=function(e){var t=this;return e.forEach(function(e){t.states["#"+t.getItemID(e)]={hasChanged:!1,id:t.getItemID(e),defSelState:t.getItemSelState(e)}}),t},a.recordChanges=function(e){var t=this;return e.forEach(function(e){var a=t.states["#"+t.getItemID(e)];a.hasChanged=t.getItemSelState(e)!==a.defSelState}),t},a.destroy=function(){var e=this;e.config=t,e.states=t,e.changes=t},function(){return new e}}e.module("rpGrid").factory("rpGridPaginationSelectionModel",[a])}(angular);