angular.module("rpFormInputDate",[]),function(t){"use strict";function e(t){t.put(n,a)}var a,n;n="templates/realpage/form/input-date/input-date.html",a="<div class='rp-input-date {{dateModel.options.displaySize}}' ng-class='dateModel.state()'><span ng-show='!dateModel.display' class='input-placeholder'>{{dateModel.options.displayFormat}}</span><input type='text' ng-blur='dateModel.blur()' class='input-type-date' ng-model='dateModel.display' ng-focus='dateModel.focus()' ng-change='dir.updateModel()' ng-model-options='{\"updateOn\": \"blur\"}' maxlength='{{dateModel.options.maxLength}}' ><span class='rp-icon-calendar' rp-stop-event='click' ng-click='dir.showDatepicker($event)'></span></div>",t.module("rpFormInputDate").run(["$templateCache",e])}(angular),function(t,e){"use strict";function a(a,n,i){var o=1;return function(){var d={},p=i();return d.id="inputDateModel"+o++,d.display=e,d.options={maxLength:10,anchorRight:!1,displayFormat:"MM/DD/YY"},d._state={focus:!1},d.state=function(){return t.extend(d._state,{empty:!d.display})},d.updateOptions=function(e){t.extend(d.options,e||{})},d.focus=function(){d._state.focus=!0,d._state.touched=!0},d.blur=function(){d._state.focus=!1},d.dirty=function(){d._state.dirty=!0},d.invalid=function(){d._state.invalid=!0},d.valid=function(){d._state.invalid=!1},d.getValue=function(){var t=p.parse(d.display),e=d.display&&t,i=a(t,d.options.displayFormat);if(e=e&&"Invalid date"!=i,i&&d.options.min){var o=a(d.options.min,"x");e=e&&!n(i).isBefore(o)}if(i&&d.options.max){var r=a(d.options.max,"x");e=e&&!n(i).isAfter(r)}return e?i.format("x"):"Invalid date"},d.updateDisplay=function(t){d._state.invalid=!1,d.display=a(t,"x").format(d.options.displayFormat)},d}}t.module("rpFormInputDate").factory("rpInputDateModel",["moment","rpDate","dateParser",a])}(angular),function(t,e){"use strict";function a(t,a,n){function i(i,d,p){var r,s,l=a();(r={datepickerLink:e,datepickerOptions:{},id:"rpInputDate"+o++}).init=function(){i.dir=r,i.dateModel=l,l.updateOptions(i.options),r.watchModel()},r.watchModel=function(){return s=i.$watch("model",r.updateDisplay),r},r.updateModel=function(){l.dirty();var t=l.getValue();"Invalid date"==t?l.invalid():(l.valid(),i.model=t)},r.updateDisplay=function(t){t&&"Invalid date"!=t&&l.updateDisplay(t)},r.datepickerData=function(){var e="",a="",n=i.model?t(i.model,"x"):"",o=i.model?t(i.model,"x"):t();return i.options&&(e=i.options.min?t(i.options.min,"x"):"",a=i.options.max?t(i.options.max,"x"):""),{min:e,max:a,callerID:r.id,refDate:o,selDate:n}},r.showDatepicker=function(){var t=d.offset(),e=r.datepickerData();if(n.isHidden())n.show();else if(r.id==n.prevCaller())return void n.hide();i.options&&i.options.anchorRight&&(t.left=t.left+d.outerWidth()-n.size.width),t.top+=d.height()+5,n.update(e).updateStyles(t),r.datepickerLink=n.events.subscribe(r.unlinkDatepicker)},r.unlinkDatepicker=function(t){["update","hide"].contains(t.name)?r.datepickerLink():"select"==t.name&&(i.model=t.data)},r.init()}var o=1;return{scope:{model:"=",options:"="},link:i,restrict:"E",replace:!0,templateUrl:"templates/realpage/form/input-date/input-date.html"}}t.module("rpFormInputDate").directive("rpInputDate",["moment","rpInputDateModel","rpDatepickerModel",a])}(angular),function(t){"use strict";function e(t){function e(e,a,n){function i(e){var a=t.test(e);return a.nav||(a.numeric||a.slash)&&!a.shift}a.on("keydown.inputTypeDate",i)}return{link:e,restrict:"C"}}t.module("rpFormInputDate").directive("inputTypeDate",["keycode",e])}(angular);