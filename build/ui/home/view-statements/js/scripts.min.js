!function(a,b){"use strict";function c(a,c,d,e,f,g,h){var i,j=this;j.init=function(){j.model=i=e.init(),j.destWatch=a.$on("$destroy",j.destroy),i.loadData()},j.destroy=function(){j.destWatch(),j=b,a=b},j.printDiv=function(){var a="",b=["http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css","/ui/"+f+"/lib/app/css/styles.css","/ui/app/css/styles.css","/ui/home/view-statements/css/styles.css"];h(function(){a=$("#PrintID").html();var c=$("<iframe/>");c[0].name="frameData",c.css({position:"absolute",top:"-1000000px"}),$("body").append(c);var d=c[0].contentWindow?c[0].contentWindow:c[0].contentDocument.document?c[0].contentDocument.document:c[0].contentDocument;d.document.open(),d.document.write("<html><head><title>Statements</title>"),d.document.write("</head><body id=statements>"),g.each(b,function(a){d.document.write("<link href="+a+' rel="stylesheet"  type="text/css" />')}),d.document.write(a),d.document.write("<script>window.onload = function () { parent.document.title=statements; window.focus(); window.print(); parent.document.title=statement;};<\/script></body></html>"),d.document.close()},1e3)},j.init()}a.module("ui").controller("statementsCtrl",["$scope","$http","notificationService","statementsdMdl","cdnVer","underscore","$timeout",c])}(angular),function(a,b){"use strict";function c(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p={},q=b(),r=c();return p.statementData={},p.formConfig=d,p.leaseArray=[],p.init=function(){o=p.busyIndicator=g(),p.grid=q,r.watch(q),q.setConfig(a),q.formConfig=d;var b=[{dateRangeName:"This Year",dateRangeID:"01/01/"+m().format("YYYY")},{dateRangeName:"Past 6 Months",dateRangeID:m().subtract(6,"month").format("MM/DD/YYYY")},{dateRangeName:"Past 3 Months",dateRangeID:m().subtract(3,"month").format("MM/DD/YYYY")},{dateRangeName:"Current Month",dateRangeID:m().format("MM/DD/YYYY")},{dateRangeName:"Prior Month",dateRangeID:m().subtract(1,"month").format("MM/DD/YYYY")}];return d.setOptions("dateRange",b),p.dateRange="-1"===k.m?m().subtract(1,"month").format("MM/DD/YYYY"):m().format("MM/DD/YYYY"),p},p.bindtenantdata=function(a){p.list=a.records},p.loadData=function(){p.toggleGridState(!0),d.setMethodsSrc(p),i.getLeaseList(f.LeaseIDBinding()).catch(f.error).then(function(a){a.data.forEach(function(a){p.leaseArray.push({leaseID:a.LEASEID,leaseName:a.LEASEID})}),d.setOptions("leaseIdList",p.leaseArray),p.leaseId=k.id,p.getStatement()})},p.getStatement=function(){p.toggleGridState(!0),h.getStatementList(f.statementInput(p.leaseId,p.dateRange)).catch(f.error).then(function(a){p.toggleGridState(!1),a.data.api&&(p.statementData=a.data.api[0],q.setData({records:p.statementData.payinfo}))})},p.toggleGridState=function(a){return a?(p.apiReady=!1,o.busy()):(p.apiReady=!0,o.off()),p},p.onLeaseIdChange=function(a){p.getStatement()},p.onDataRange=function(a){p.getStatement()},p.init()}a.module("ui").factory("statementsdMdl",["staementGrid1Config","rpGridModel","rpGridTransform","statementConfig","$q","baseModel","rpBusyIndicatorModel","statementSvc","dashboardSvc","$timeout","$stateParams","rpGridPaginationModel","moment","underscore",c])}(angular),function(a){"use strict";function b(a,b){var c=a();return c.leaseIdList=b({nameKey:"leaseName",valueKey:"leaseID",onChange:c.getMethod("onLeaseIdChange")}),c.dateRange=b({nameKey:"dateRangeName",valueKey:"dateRangeID",onChange:c.getMethod("onDataRange")}),c.setOptions=function(a,b){if(!c[a])return c;c[a].setOptions(b)},c}a.module("ui").factory("statementConfig",["baseFormConfig","rpFormSelectMenuConfig",b])}(angular),function(a){"use strict";function b(a){var b=a();return b.get=function(){return[{key:"WHENCREATED"},{key:"TYPE"},{key:"DESCRIPTION"},{key:"AMOUNT",type:"currency"},{key:"PAYMENT",type:"currency"},{key:"BALANCE",type:"currency"}]},b.getHeaders=function(){return[[{key:"WHENCREATED",text:"Date",isSortable:!0},{key:"TYPE",text:"Transactions"},{key:"DESCRIPTION",text:"Details"},{key:"AMOUNT",text:"Amount"},{key:"PAYMENT",text:"Payments"},{key:"BALANCE",text:"Balance"}]]},b.getFilters=function(){return[{key:"WHENCREATED",type:"text",filterDelay:0,placeholder:"Filter by Date"},{key:"TYPE",type:"text",filterDelay:0,placeholder:"Filter by Transactions"},{key:"DESCRIPTION",type:"text",filterDelay:0,placeholder:"Filter by Details"},{key:"AMOUNT",type:"text",filterDelay:0,placeholder:"Filter by Amount"},{key:"PAYMENT",type:"text",filterDelay:0,placeholder:"Filter by start Payments"},{key:"BALANCE",type:"textbox",filterDelay:0,placeholder:"Filter by Balance"}]},b.getTrackSelectionConfig=function(){var a={};return b.get().forEach(function(b){"select"==b.type&&(a.idKey=b.idKey,a.selectKey=b.key)}),a},b}a.module("ui").factory("staementGrid1Config",["rpGridConfig",b])}(angular),function(){"use strict";function a(a){return{getStatementList:function(b){return a.post("/api/statement",b)}}}angular.module("ui").factory("statementSvc",a),a.$inject=["$http"]}();