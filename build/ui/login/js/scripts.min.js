!function(){"use strict";function a(a,b,c){var d,e=this;e.init=function(){e.destWatch=c.$on("$destroy",e.destroy),e.model=d=a,d.showHideFlag="login",d.oldPwd="",d.rdnmobCode=!1,e.formConfig=b,d.numFlag=d.upperFlag=d.lowerFlag=d.specialCharFlag=!1},e.destroy=function(){e.destWatch(),e=void 0,c=void 0},e.init()}angular.module("ui").controller("loginCtrl",a),a.$inject=["loginMdl","loginFormConfig","$scope"]}(),function(){"use strict";function a(a,b,c,d,e){var f={},g=a("login").translate;f.formConfig=c,f.strUserName="",f.translateNames=function(a){return g(a)},f.init=function(){return f.securityquestion="1",f},f.showhideDiv=function(a){f.showHideFlag=a,f.pwdSuccess=!1},c.setMethodsSrc(f);var h=[{securityQuesnName:"What is your pet's name?",securityQuesnID:"What is your pet's name?"},{securityQuesnName:"What is your mother's maiden name?",securityQuesnID:"What is your mother's maiden name?"},{securityQuesnName:"What is your favorite color?",securityQuesnID:"What is your favorite color?"},{securityQuesnName:"What city were you born in?",securityQuesnID:"What city were you born in?"},{securityQuesnName:"What town was your mother born in?",securityQuesnID:"What town was your mother born in?"},{securityQuesnName:"What town was your father born in?",securityQuesnID:"What town was your father born in?"},{securityQuesnName:"Where did you meet your spouse?",securityQuesnID:"Where did you meet your spouse?"},{securityQuesnName:"What was the make of your first car?",securityQuesnID:"What was the make of your first car?"},{securityQuesnName:"What is the name of the street on which you grew up on?",securityQuesnID:"What is the name of the street on which you grew up on?"}];c.setOptions("securityquestion",h),f.pwdValidation=function(a){var b=/(?=.*\d)/,c=/(?=.*[A-Z])/,d=/(?=.*[a-z])/,e=/(?=.*[$@$!%*#?&])/;f.numFlag=void 0!==a&&b.test(a),f.upperFlag=void 0!==a&&c.test(a),f.lowerFlag=void 0!==a&&d.test(a),f.specialCharFlag=void 0!==a&&e.test(a)};var i=0;return f.submitLogin=function(){var a={request:{operation:{authentication:{login:{userid:f.username,password:f.pwd}},content:{function:{getTPAPISession:{}}}}}};f.oldPwd="",b.getLoginDetails(a).then(function(a){a.data&&(a.data.api?(f.oldPwd=f.pwd,i=0,sessionStorage.setItem("sessionID",a.data.api[0].sessionid),sessionStorage.setItem("userName",a.data.api[0].name),sessionStorage.setItem("companyName",a.data.api[0].companyname),"T"===a.data.api[0].resetpassword?(f.showHideFlag="firstlogin",f.strUserName=f.username):d.go("home.dashbaord")):0===i?(f.pwdSuccess="failure",i++):1===i?(i++,f.pwdSuccess="warning"):f.pwdSuccess="locked")})},f.checkUserName=function(a){f.showHideFlag=a,f.strUserName=f.u_e_id},f.sendVerifycode=function(a){f.showHideFlag="confirmpwd",f.displaymob_email=f.emailCode?f.emailCode:f.mobcode1?f.mobcode1:""},f.radiochange=function(a){alert(a)},f.resetpwdSubmit=function(a){var c={request:{operation:{content:{function:{getchangepwd:{pwdtype:"firstlogin"===f.showHideFlag?"login":"change",newpwd:f.pwd1,oldpwd:f.oldPwd,cnfrmpwd:f.pwd2,secquestion:f.securityquestion,secanswer:f.security_a}}}}}};b.changePwd(c).then(function(a){a.data&&"success"===a.data.api[0].status&&(e.removeNotifications(),e.success(a.data.api[0].message),"firstlogin"===f.showHideFlag?d.go("home.dashbaord"):(f.showHideFlag="login",f.pwdSuccess="success"))})},f.init()}angular.module("ui").factory("loginMdl",a),a.$inject=["appLangTranslate","loginSvc","loginFormConfig","$state","notificationService"]}(),function(a,b){"use strict";function c(a,b,c){var d=a();return d.genRadio=function(a,c){c.forEach(function(c){d[c.id]=b({name:a})})},d.securityquestion=c({nameKey:"securityQuesnName",valueKey:"securityQuesnID"}),d.setOptions=function(a,b){if(!d[a])return d;d[a].setOptions(b)},d}a.module("ui").factory("loginFormConfig",["baseFormConfig","rpFormInputRadioConfig","rpFormSelectMenuConfig",c])}(angular),function(){"use strict";function a(a){function c(c,d,e,f){if(f&&e[b]){var g=a(e[b]),h=function(a){var b=g(c),d=a===b;return f.$setValidity("match",d),a};f.$parsers.unshift(h),f.$formatters.push(h),e.$observe(b,function(){h(f.$viewValue)})}}return{link:c,restrict:"A",require:"?ngModel"}}var b="ngMatch";angular.module("ui").directive(b,a),a.$inject=["$parse"]}(),function(){"use strict";function a(a){return{getLoginDetails:function(b){return a.post("/api/login",b)},changePwd:function(b){return a.post("/api/changepwd",b)}}}angular.module("ui").factory("loginSvc",a),a.$inject=["$http"]}();