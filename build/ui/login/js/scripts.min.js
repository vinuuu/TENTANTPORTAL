!function(){"use strict";function a(a,b,c,d){var e,f=this;f.init=function(){f.destWatch=c.$on("$destroy",f.destroy),f.model=e=a,e.showHideFlag="login",e.checkall=!1,e.oldPwd="",e.rdnmobCode=!1,f.formConfig=b,e.numFlag=e.upperFlag=e.lowerFlag=e.specialCharFlag=!1,d("username")&&d("password")&&(e.checkall=!0,f.model.username=d("username"),f.model.pwd=d("password"))},f.destroy=function(){f.destWatch(),f=void 0,c=void 0},f.rememberMe=function(){e.checkall?(d("username",f.model.username),d("password",f.model.pwd)):(d("username",""),d("password",""))},f.init()}angular.module("ui").controller("loginCtrl",a),a.$inject=["loginMdl","loginFormConfig","$scope","$remember"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){var i,j={},k=a("login").translate;j.formConfig=c,j.strUserName="",j.translateNames=function(a){return k(a)},j.toggleGridState=function(a){return a?(j.apiReady=!1,i.busy()):(j.apiReady=!0,i.off()),j},j.init=function(){return j.securityquestion="1",i=j.busyIndicator=f(),j},j.showhideDiv=function(a){j.showHideFlag=a,j.pwdSuccess=!1},c.setMethodsSrc(j);var l=[{securityQuesnID:"What is your pet's name?"},{securityQuesnID:"What is your mother's maiden name?"},{securityQuesnID:"What is your favorite color?"},{securityQuesnID:"What city were you born in?"},{securityQuesnID:"What town was your mother born in?"},{securityQuesnID:"What town was your father born in?"},{securityQuesnID:"Where did you meet your spouse?"},{securityQuesnID:"What was the make of your first car?"},{securityQuesnID:"What is the name of the street on which you grew up on?"}];c.setOptions("securityquestion",l),j.securityquestion="What is your pet's name?",j.pwdValidation=function(a){var b=/(?=.*\d)/,c=/(?=.*[A-Z])/,d=/(?=.*[a-z])/,e=/(?=.*[$@$!%*#?&])/;j.numFlag=void 0!==a&&b.test(a),j.upperFlag=void 0!==a&&c.test(a),j.lowerFlag=void 0!==a&&d.test(a),j.specialCharFlag=void 0!==a&&e.test(a)};var m=0;return j.submitLogin=function(){j.toggleGridState(!0),j.oldPwd="",b.getLoginDetails(h.submitLoginInput(j.username,j.pwd)).then(function(a){j.toggleGridState(!1),a.data&&(a.data.api?(j.oldPwd=j.pwd,m=0,sessionStorage.setItem("sessionID",a.data.api[0].sessionid),sessionStorage.setItem("userName",a.data.api[0].name),sessionStorage.setItem("companyName",a.data.api[0].companyname),g.setUsername(a.data.api[0].name),"T"===a.data.api[0].resetpassword?(j.showHideFlag="firstlogin",j.strUserName=j.username):d.go("home.dashbaord")):0===m?(j.pwdSuccess="failure",m++):1===m?(m++,j.pwdSuccess="warning"):j.pwdSuccess="locked")}).catch(function(a){j.toggleGridState(!1),0===m?(j.pwdSuccess="failure",m++):1===m?(m++,j.pwdSuccess="warning"):j.pwdSuccess="locked"})},j.radiochange=function(a){alert(a)},j.resetpwdSubmit=function(a){j.toggleGridState(!0),b.changePwd(h.resetpwdSubmitInput(j.pwd1,j.pwd2,j.oldPwd,j.securityquestion,j.security_a)).then(function(a){j.toggleGridState(!1),a.data&&"success"===a.data.api[0].status&&(e.removeNotifications(),e.success(a.data.api[0].message),"firstlogin"===j.showHideFlag&&d.go("home.dashbaord"))})},j.checkUserName=function(a){j.toggleGridState(!0),b.forgotPwd(h.checkUserNameInput(j.u_e_id)).then(function(b){j.toggleGridState(!1),b.data.api?"success"===b.data.api[0].status&&(j.securityQusn=b.data.api[0].secquestion,j.showHideFlag=a,j.strUserName=j.u_e_id,j.strErrUSernameFlag=!1):(j.strErrUSernameFlag=!0,j.elseErrMessage(b.data))}).catch(function(a){j.toggleGridState(!1),j.strErrUSernameFlag=!0,j.elseErrMessage(a.data)})},j.answerSecurityQusn=function(a){j.toggleGridState(!0),b.forgotPwd(h.answerSecurityQusnInput(j.strUserName,j.securityQusn,j.question1)).then(function(b){j.toggleGridState(!1),b.data.api?"success"===b.data.api[0].status&&(j.showHideFlag=a,j.strErrQusn=!1,e.success(b.data.api[0].message)):(j.strErrQusn=!0,j.elseErrMessage(b.data))}).catch(function(a){j.toggleGridState(!1),j.strErrQusn=!0,j.elseErrMessage(a.data)})},j.checkSixDigitCode=function(a){j.toggleGridState(!0),b.forgotPwd(h.checkSixDigitCodeInput(j.strUserName,j.emailCode)).then(function(b){j.toggleGridState(!1),b.data.api?"success"===b.data.api[0].status&&(j.showHideFlag=a,j.userToken=b.data.api[0].usertoken,j.strErrVerifyCode=!1):(j.strErrVerifyCode=!0,j.elseErrMessage(b.data))}).catch(function(a){j.toggleGridState(!1),j.strErrVerifyCode=!0,j.elseErrMessage(a.data)})},j.forgotpwdSubmit=function(){j.toggleGridState(!0),b.forgotPwd(h.forgotpwdSubmitInput(j.strUserName,j.emailCode,j.userToken,j.pwd1,j.pwd2)).then(function(a){j.toggleGridState(!1),a.data.api&&"success"===a.data.api[0].status&&(j.showHideFlag="login",j.pwdSuccess="success")}).catch(function(a){j.toggleGridState(!1),e.error(j.elseErrMessage(a.data))})},j.elseErrMessage=function(a){return j.elseStr=""!==a.errormessage[0].error[0].description[0].cdata?a.errormessage[0].error[0].description[0].cdata:a.errormessage[0].error[0].description2[0].cdata,j.elseStr},j.init()}angular.module("ui").factory("loginMdl",a),a.$inject=["appLangTranslate","loginSvc","loginFormConfig","$state","notificationService","rpBusyIndicatorModel","globalHeaderUsername","baseModel"]}(),function(a,b){"use strict";function c(a,b,c){var d=a();return d.genRadio=function(a,c){c.forEach(function(c){d[c.id]=b({name:a})})},d.securityquestion=c({nameKey:"securityQuesnID",valueKey:"securityQuesnID"}),d.setOptions=function(a,b){if(!d[a])return d;d[a].setOptions(b)},d}a.module("ui").factory("loginFormConfig",["baseFormConfig","rpFormInputRadioConfig","rpFormSelectMenuConfig",c])}(angular),function(a,b){"use strict";function c(b,c,d){function e(b){for(var c=document.cookie.split("; "),d=0;d<c.length;d++){var e=c[d].split("=");if(b===e[0]){var f="";try{f=a.fromJson(e[1])}catch(a){f=unescape(e[1])}return f}}return null}return function(b,c){if(1===arguments.length)return e(b);var d=b+"=";if("object"==typeof c){var f="";if(d+="object"==typeof c.value?a.toJson(c.value)+";":c.value+";",c.expires){var g=new Date;g.setTime(g.getTime()+24*c.expires*60*60*1e3),f=g.toGMTString()}d+=c.session?"":"expires="+f+";",d+=c.path?"path="+c.path+";":"",d+=c.secure?"secure;":""}else d+=c+";";document.cookie=d}}a.module("ui").factory("$remember",[c])}(angular),function(){"use strict";function a(a){function c(c,d,e,f){if(f&&e[b]){var g=a(e[b]),h=function(a){var b=g(c),d=a===b;return f.$setValidity("match",d),a};f.$parsers.unshift(h),f.$formatters.push(h),e.$observe(b,function(){h(f.$viewValue)})}}return{link:c,restrict:"A",require:"?ngModel"}}var b="ngMatch";angular.module("ui").directive(b,a),a.$inject=["$parse"]}(),function(){"use strict";function a(a){return{getLoginDetails:function(b){return a.post("/api/login",b)},changePwd:function(b){return a.post("/api/changepwd",b)},forgotPwd:function(b){return a.post("/api/forgotPwd",b)}}}angular.module("ui").factory("loginSvc",a),a.$inject=["$http"]}();