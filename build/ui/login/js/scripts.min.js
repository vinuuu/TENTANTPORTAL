!function(){"use strict";function a(a,b,c){var d,e=this;e.init=function(){e.destWatch=c.$on("$destroy",e.destroy),e.model=d=a,d.showHideFlag="login",d.oldPwd="",d.rdnmobCode=!1,e.formConfig=b,d.numFlag=d.upperFlag=d.lowerFlag=d.specialCharFlag=!1},e.destroy=function(){e.destWatch(),e=void 0,c=void 0},e.init()}angular.module("ui").controller("loginCtrl",a),a.$inject=["loginMdl","loginFormConfig","$scope"]}(),function(){"use strict";function a(a,b,c,d){var e={},f=a("login").translate;e.formConfig=c,e.strUserName="",e.translateNames=function(a){return f(a)},e.init=function(){return e.securityquestion="1",e},e.showhideDiv=function(a){e.showHideFlag=a,e.pwdSuccess=!1},c.setMethodsSrc(e);var g=[{securityQuesnName:"What is your pet's name?",securityQuesnID:"What is your pet's name?"},{securityQuesnName:"What is your mother's maiden name?",securityQuesnID:"What is your mother's maiden name?"},{securityQuesnName:"What is your favorite color?",securityQuesnID:"What is your favorite color?"},{securityQuesnName:"What city were you born in?",securityQuesnID:"What city were you born in?"},{securityQuesnName:"What town was your mother born in?",securityQuesnID:"What town was your mother born in?"},{securityQuesnName:"What town was your father born in?",securityQuesnID:"What town was your father born in?"},{securityQuesnName:"Where did you meet your spouse?",securityQuesnID:"Where did you meet your spouse?"},{securityQuesnName:"What was the make of your first car?",securityQuesnID:"What was the make of your first car?"},{securityQuesnName:"What is the name of the street on which you grew up on?",securityQuesnID:"What is the name of the street on which you grew up on?"}];c.setOptions("securityquestion",g),e.pwdValidation=function(a){var b=/(?=.*\d)/,c=/(?=.*[A-Z])/,d=/(?=.*[a-z])/,f=/(?=.*[$@$!%*#?&])/;e.numFlag=void 0!==a&&b.test(a),e.upperFlag=void 0!==a&&c.test(a),e.lowerFlag=void 0!==a&&d.test(a),e.specialCharFlag=void 0!==a&&f.test(a)};var h=0;return e.submitLogin=function(){var a={request:{operation:{authentication:{login:{userid:e.username,password:e.pwd}},content:{function:{getTPAPISession:{}}}}}};e.oldPwd="",b.getLoginDetails(a).then(function(a){a.data&&(a.data.api?(e.oldPwd=e.pwd,h=0,sessionStorage.setItem("sessionID",a.data.api[0].sessionid),sessionStorage.setItem("userName",a.data.api[0].name),sessionStorage.setItem("companyName",a.data.api[0].companyname),"T"===a.data.api[0].resetpassword?(e.showHideFlag="firstlogin",e.strUserName=e.username):d.go("home.dashbaord")):0===h?(e.pwdSuccess="failure",h++):1===h?(h++,e.pwdSuccess="warning"):e.pwdSuccess="locked")})},e.checkUserName=function(a){e.showHideFlag=a,e.strUserName=e.u_e_id},e.sendVerifycode=function(a){e.showHideFlag="confirmpwd",e.displaymob_email=e.emailCode?e.emailCode:e.mobcode1?e.mobcode1:""},e.radiochange=function(a){alert(a)},e.resetpwdSubmit=function(a){var c={request:{operation:{content:{function:{getchangepwd:{pwdtype:"firstlogin"===e.showHideFlag?"login":"change",newpwd:e.pwd1,oldpwd:e.oldPwd,cnfrmpwd:e.pwd2,secquestion:e.securityquestion,secanswer:e.security_a}}}}}};b.changePwd(c).then(function(a){a.data&&"success"===a.data.api[0].status&&(alert(a.data.api[0].message),"firstlogin"===e.showHideFlag?d.go("home.dashbaord"):(e.showHideFlag="login",e.pwdSuccess="success"))})},e.init()}angular.module("ui").factory("loginMdl",a),a.$inject=["appLangTranslate","loginSvc","loginFormConfig","$state"]}(),function(a,b){"use strict";function c(a,b,c){var d=a();return d.genRadio=function(a,c){c.forEach(function(c){d[c.id]=b({name:a})})},d.securityquestion=c({nameKey:"securityQuesnName",valueKey:"securityQuesnID"}),d.setOptions=function(a,b){if(!d[a])return d;d[a].setOptions(b)},d}a.module("ui").factory("loginFormConfig",["baseFormConfig","rpFormInputRadioConfig","rpFormSelectMenuConfig",c])}(angular),function(){"use strict";function a(a){function c(c,d,e,f){if(f&&e[b]){var g=a(e[b]),h=function(a){var b=g(c),d=a===b;return f.$setValidity("match",d),a};f.$parsers.unshift(h),f.$formatters.push(h),e.$observe(b,function(){h(f.$viewValue)})}}return{link:c,restrict:"A",require:"?ngModel"}}var b="ngMatch";angular.module("ui").directive(b,a),a.$inject=["$parse"]}(),function(){"use strict";function a(a){return{getLoginDetails:function(b){return a.post("/api/login",b)},changePwd:function(b){return a.post("/api/changepwd",b)}}}angular.module("ui").factory("loginSvc",a),a.$inject=["$http"]}();