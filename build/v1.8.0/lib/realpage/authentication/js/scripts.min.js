angular.module("rpAuthentication",[]),function(e){"use strict";e.module("rpAuthentication").service("authentication",["$http","guid","rpCookie","serialize",function(t,a,r,n){var i=this;i.headers={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},i.data={client_id:"OS_web",sessionGuid:a.getNew()},i.req={method:"POST",headers:i.headers,transformRequest:n,url:"/api/core/authentication/login"},i.hasAuth=function(){return void 0!==r.read("authorization")},i.getExpTime=function(){return 1e3*parseInt(r.read("authExpires"))},i.authenticate=function(a){return i.req.data=e.extend({},i.data,a,{grant_type:"password"}),t(i.req)},i.storeAuth=function(e){var t=e.data;r.create("reauth",t.refresh_token),r.create("authExpires",t.expires_in),r.create("authorization",t.access_token)},i.reauthenticate=function(){return i.req.data=e.extend({},i.data,{grant_type:"refresh_token",refresh_token:r.read("reauth")}),t(i.req)},i.storeReauth=function(e){var t=e.data;r.create("reauth",t.refresh_token),r.create("authExpires",t.expires_in)},i.erase=function(){return r.erase("reauth"),r.erase("authExpires"),r.erase("authorization"),t({method:"DELETE",url:"/api/core/authentication/logout"})}}])}(angular);