angular.module("rpBreadcrumbs",[]),angular.module("rpBreadcrumbs").run(["$templateCache",function(e){e.put("realpage/breadcrumbs/templates/breadcrumbs.html",'<div class="rp-breadcrumbs" ng-show="model.isVisible"><a class="home-icon {{model.home.icon}}" href="{{model.home.url}}"></a><div class="pull-left ft-b-r"><div class="product-name">{{model.product.name}}</div><div class="rp-breadcrumbs-links" ng-if="!model.showBackBtn"><div class="rp-breadcrumb home-link"><a href="{{model.home.url}}" class="rp-breadcrumb-text">{{model.home.text}}</a></div><ul class="rp-breadcrumbs-list"><li ng-repeat="link in model.links" class="rp-breadcrumb p-a-0"><a href="{{link.href}}" class="rp-breadcrumb-text">{{link.text}}</a></li></ul><div class="active-page rp-breadcrumb"><span class="active-page-text rp-breadcrumb-text">{{model.activePage.text}}</span></div></div><div class="rp-breadcrumb home-link" ng-if="model.showBackBtn"><span class="rp-breadcrumb-back-text" ng-click="model.goBack()">{{model.backLinkData.text}}</span></div></div></div>')}]),function(e){"use strict";e.module("rpBreadcrumbs").provider("rpBreadcrumbsModel",[function(){var r=this;r.links={},r.breadcrumbs=[],r.setProduct=function(e){return r.product=e,r},r.setHome=function(e){return r.home=e,r},r.setLinks=function(e){return r.links=e,r},r.setBreadcrumbs=function(e){return r.breadcrumbs=e,r},r.$get=["$rootScope","$window","location","rpSessionStorage",function(a,t,n,c){var i={};return i.init=function(){return i.backLinkData={text:"Back"},i.updateFromStorage(),a.$on("$locationChangeSuccess",i.setLinks),i.home=e.extend({},r.home),i.product=e.extend({},r.product),i},i.updateFromStorage=function(){if(c.has("breadcrumbsLinks")){var a=c.get("breadcrumbsLinks");Object.keys(a).forEach(function(t){e.extend(r.links[t],a[t])})}},i.setLinks=function(){var e=n.url();i.isVisible=!1,i.showBackLink(!1).restoreBackLink(),r.breadcrumbs.forEach(function(a){e.match(a.url)&&(i.isVisible=!0,i.links=a.links||[],i.activePage=a.activePage,i.home.icon=a.homeIcon||r.home.icon,i.product.name=a.productName||r.product.name)}),i.updateLinks()},i.setActivePage=function(e){return i.activePage=e,i},i.updateLinks=function(){var e=!1,a=n.url();return Object.keys(r.links).forEach(function(t){var n=r.links[t],c=n.pattern?new RegExp(n.pattern):"";void 0!==n.pattern&&a.match(c)&&(e=!0,n.href=a)}),e&&c.set("breadcrumbsLinks",r.links),i},i.showBackLink=function(e){return e=void 0===e||!!e,i.showBackBtn=e,i},i.updateBackLink=function(r){return r=r||{},e.extend(i.backLinkData,r),i},i.restoreBackLink=function(){return e.extend(i.backLinkData,{url:"",text:"Back"}),i},i.goBack=function(){return i.backLinkData.url?n.url(i.backLinkData.url):t.history.back(),i},i.init()}]}])}(angular),function(e){"use strict";e.module("rpBreadcrumbs").directive("rpBreadcrumbs",["rpBreadcrumbsModel",function(e){return{scope:{},link:function(r,a,t){r.model=e},restrict:"E",replace:!0,templateUrl:"realpage/breadcrumbs/templates/breadcrumbs.html"}}])}(angular);