angular.module("rpSticky",[]),function(t){"use strict";t.module("rpSticky").directive("rpSticky",["windowScroll","windowSize",function(e,o){var i=1;return{link:function(a,r,s){var n={};n.data={},n.isLocked=!1,n.init=function(){var t=n.getOptions(),r=t.instName?t.instName:"rpSticky"+i++;a[r]=r,n.setup().recordElemData(),a.$on("$destroy",n.destroy),n.sizeWatch=o.subscribe(n.onWinResize),n.scrollWatch=e.subscribe(n.onWinScroll)},n.setup=function(){var e='<div class="'+n.getOptions().phdrClassName+'" />';return n.phdr=t.element(e).insertAfter(r),n},n.onWinScroll=function(t){if(!n.isDisabled()){var e=n.getOptions().lockTop,o=t.scrollTop>n.data.offsetTop-e;n[o?"lock":"unlock"]()}},n.recordElemData=function(){return n.data.elemWd=r.outerWidth(),n.data.elemHt=r.outerHeight(),n.data.offsetTop=r.offset().top,n.data.offsetLeft=r.offset().left,n},n.recordPhdrData=function(){return n.data.elemWd=n.phdr.width(),n.data.offsetLeft=n.phdr.offset().left,n},n.onWinResize=function(){if(n.isLocked){n.recordPhdrData();var t={width:n.data.elemWd,left:n.data.offsetLeft};r.css(t)}else n.recordElemData()},n.lock=function(){var t,e;n.isLocked=!0,t={marginLeft:0,width:n.data.elemWd,left:n.data.offsetLeft,top:n.getOptions().lockTop},e={display:"block",height:n.data.elemHt},n.phdr.css(e),r.css(t).addClass("locked")},n.unlock=function(){var t,e;n.isLocked=!1,t={top:"",left:"",width:"",marginLeft:""},e={height:"",display:""},n.phdr.css(e),r.css(t).removeClass("locked"),n.recordElemData()},n.getOptions=function(){var e,o;return e={lockTop:0,isDisabled:!1,phdrClassName:"rp-sticky-placeholder"},o=a.$eval(s.rpSticky)||{},t.extend(e,o)},n.isDisabled=function(){return n.getOptions().isDisabled},n.destroy=function(){n.sizeWatch(),n.scrollWatch(),n.phdr.remove()},n.init()},restrict:"A"}}])}(angular);