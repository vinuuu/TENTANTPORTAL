!function(e,n){"use strict";e.module("rpAccordionMenu").directive("rpAccordionMenu",[function(){var e=1;return{scope:{model:"="},link:function(t,l,i){var c={links:[]};c.init=function(){c.genLinksList(),t.acMenu=c,c.destWatch=t.$on("$destroy",c.destroy)},c.genLinksList=function(n){return(n||t.model.list).forEach(function(n){n.list&&n.list.length>0?c.genLinksList(n.list):(n.id=e++,c.links.push(n))}),c},c.invokeMethod=function(e){e.method(e),c.setActive(e)},c.hasSubmenu=function(e){return e.list&&e.list.length>0},c.setActive=function(e){c.links.forEach(function(n){n.active=n.id==e.id})},c.destroy=function(){c.destWatch(),delete t.acMenu,c=n,i=n,l=n,t=n},c.init()},restrict:"E",replace:!0,templateUrl:"realpage/accordion-menu/templates/accordion-menu.html"}}])}(angular),function(e,n){"use strict";e.module("rpAccordionMenu").directive("rpAccordionMenuToggle",["$timeout",function(e){return{link:function(t,l,i){var c={},a="click.rpAccordionMenuToggle";c.init=function(){t.acMenuToggle=c,l.on(a,c.onClick),e(c.initState,100),c.destWatch=t.$on("$destroy",c.destroy)},c.initState=function(){c.menu=l.siblings(),c.state={active:l.hasClass("open")},c.state.active||c.menu.height(0)},c.onClick=function(){t.$apply(c.toggleMenu)},c.toggleMenu=function(){var e=c.state.active;c[e?"closeMenu":"openMenu"]()},c.openMenu=function(){var e=c.menu[0].scrollHeight;c.animMenu(e),c.state.active=!0},c.closeMenu=function(){c.animMenu(0),c.state.active=!1},c.animMenu=function(e){c.menu.animate({height:e},300)},c.destroy=function(){l.off(a),c.destWatch(),delete t.acMenuToggle,c=n,i=n,l=n,a=n,t=n},c.init()},restrict:"A"}}])}(angular),angular.module("rpAccordionMenu").run(["$templateCache",function(e){e.put("realpage/accordion-menu/templates/accordion-menu.html",'<ul class="rp-accordion"><li class="rp-accordion-level1" ng-repeat="level1MenuItem in model.list"><span rp-accordion-menu-toggle ng-class="acMenuToggle.state" class="rp-accordion-level1-label">{{level1MenuItem.text}}</span><ul class="rp-accordion-level1-menu" ng-if="acMenu.hasSubmenu(level1MenuItem)"><li class="rp-accordion-level2" ng-repeat="level2MenuItem in level1MenuItem.list"><a ng-if="level2MenuItem.sref" ui-sref-active="active" class="rp-accordion-level2-label" ui-sref="{{level2MenuItem.sref}}" ng-click="acMenu.setActive(level2MenuItem)" ng-class="{active: level2MenuItem.active}">{{level2MenuItem.text}} </a><a ng-if="level2MenuItem.href" class="rp-accordion-level2-label" ng-href="{{level2MenuItem.sref}}" ng-click="acMenu.setActive(level2MenuItem)" ng-class="{active: level2MenuItem.active}">{{level2MenuItem.text}} </a><span ng-if="level2MenuItem.method" class="rp-accordion-level2-label" ng-class="{active: level2MenuItem.active}" ng-click="acMenu.invokeMethod(level2MenuItem)">{{level2MenuItem.text}}</span></li></ul></li></ul>')}]);