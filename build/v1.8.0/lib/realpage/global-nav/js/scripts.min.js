var RealPage=RealPage||{};!function(n){"use strict";n.GlobalNav={}}(RealPage),function(n,e){"use strict";var t=window._.template("<% if (links && links.length > 0) { %><ul class='rp-global-nav-submenu <%- className %>'><% _.forEach(links, function(item, index, list) { %><li class='rp-global-nav-submenu-item <%- item.className %>'><a href='<%- item.labelLink %>' class='rp-global-nav-submenu-item-label <%- item.labelClassName %>'><%- item.labelText %></a></li><% }); %></ul><% } %>");e.getSubmenuHtml=function(n){return t(n).trim()}}(0,RealPage.GlobalNav),function(n,e){"use strict";function t(t){return t=n.extend({submenu:{links:[],className:""},className:"",labelText:"",iconClassName:"",labelClassName:""},t),l({label:i(t),className:t.className,submenu:e.getSubmenuHtml(t.submenu)})}var a=n.template("<% if (labelLink) { %><a href='<%- labelLink %>' class='rp-global-nav-menu-item-label <%- labelClassName %>'><span class='rp-global-nav-menu-item-label-icon <%- iconClassName %>'></span><span class='rp-global-nav-menu-item-label-text'><%- labelText %></span><% if (submenu.links && submenu.links.length !== 0) { %><span class='rp-global-nav-menu-item-label-toggle'></span><% } %></a><% } else { %><span class='rp-global-nav-menu-item-label <%- labelClassName %>'><span class='rp-global-nav-menu-item-label-icon <%- iconClassName %>'></span><span class='rp-global-nav-menu-item-label-text'><%- labelText %></span><% if (submenu.links && submenu.links.length !== 0) { %><span class='rp-global-nav-menu-item-label-toggle'></span><% } %></span><% } %>"),i=function(e){return e=n.extend({labelLink:"",labelClassName:""},e),a(e)},l=n.template("<li class='rp-global-nav-menu-item <%- className %>'><%= label %><%= submenu %></li>"),u=n.template("<% if (html) { %><div class='rp-global-nav-menu-wrap'><ul class='rp-global-nav-menu'><%= html %></ul></div><% } %>");e.getMenuHtml=function(n){var e="";return(n=n||[]).forEach(function(n){e+=t(n)}),u({html:e})}}(window._,RealPage.GlobalNav),function(n,e){"use strict";function t(n){a++,this.init(n)}var a=0,i=n.RealPage.GlobalNav,l=t.prototype;l.init=function(n){var e=this;return e.id=a,e.elem=n,e.onClickCallback=function(){},n.on("click",e.clickHandler.bind(e)),e},l.activate=function(n){var e=this,t=e.elem.attr("href"),a=n.replace(/^.*(\#.*)$/,"$1");return e.setActive(t==n||t==a),e},l.setActive=function(n){var e=this;return e.elem[n?"addClass":"removeClass"]("active"),e},l.onClick=function(n){var e=this;return e.onClickCallback=n,e},l.clickHandler=function(){var n=this;return n.onClickCallback(n),n},l.is=function(n){var e=this;return n.hasID(e.id)},l.hasID=function(n){return this.id==n},l.hasUrl=function(n){return this.elem.attr("href")==n},i.menuLink=function(n){var a=(n=e(n)).data("menuLink");return a||(a=new t(n),n.data("menuLink",a)),a}}(window,jQuery),function(n,e){"use strict";function t(n){a++,this.init(n)}var a=0,i=t.prototype;i.init=function(n){var e=this;return e.id=a,e.open=!1,e.menuItem=n,e.openHeight=n.prop("scrollHeight"),e.label=n.children(".rp-global-nav-menu-item-label"),e.closedHeight=e.label.outerHeight(),e.label.on("click",e.toggle.bind(e)),e.menuItem.height(e.closedHeight),e},i.hasID=function(n){return this.id===n},i.expand=function(){var n=this;return n.open=!0,n.menuItem.addClass("open"),n.menuItem.height(n.openHeight),n},i.collapse=function(){var n=this;return n.open=!1,n.menuItem.removeClass("open"),n.menuItem.height(n.closedHeight),n},i.isOpen=function(){return this.open},i.hasSubmenu=function(){return!!this.menuItem.children(".rp-global-nav-submenu").length},i.onActivate=function(n){var e=this;return e.activateCallback=n,e},i.is=function(n){var e=this;return n.hasID(e.id)},i.toggle=function(n){var e=this;return e.activateCallback(e),n.stopPropagation(),e},e.menuItem=function(e){var a=(e=n(e)).data("menuItem");return a||(a=new t(e),e.data("menuItem",a)),a}}(jQuery,RealPage.GlobalNav),function(n,e){"use strict";function t(n){this.init(n)}var a=n.RealPage.GlobalNav,i=t.prototype;i.init=function(e){var t=this,a=n.location.href;return t.menu=e,t.onLinkActivateCallback=function(){},t.genMenuItems().genLinks().bindEvents().initActiveLink(a),t},i.genMenuItems=function(){var n=this,e=n.menu.children(".rp-global-nav-menu-item");return n.menuItems=[],e.each(function(e,t){var i=a.menuItem(t);i.onActivate(n.toggleMenuItem.bind(n)),n.menuItems.push(i)}),n},i.genLinks=function(){var n=this,e=n.menu.find("a");return n.menuLinks=[],e.each(function(e,t){var i=a.menuLink(t);i.onClick(n.activateLink.bind(n)),n.menuLinks.push(i)}),n},i.activateLink=function(n){var e=this;return e.menuLinks.forEach(function(e){e.setActive(e.is(n))}),e.onLinkActivateCallback(),e},i.bindEvents=function(){var t=this;return e(n).on("hashchange",t.hashchangeHandler.bind(t)),t},i.hashchangeHandler=function(){var e=this;return e.menuLinks.forEach(function(e){e.activate(n.location.hash)}),e.menuItems.forEach(function(n){n.collapse()}),e},i.initActiveLink=function(n){var e=this;return e.menuLinks.forEach(function(e){e.activate(n)}),e},i.toggleMenuItem=function(n){var e=this;return n.isOpen()?n.collapse():(n.expand(),e.menuItems.forEach(function(e){!e.is(n)&&e.isOpen()&&e.collapse()})),e},i.onLinkActivate=function(n){var e=this;return e.onLinkActivateCallback=n,e},a.menu=function(n){var e=n.data("menu");return e||(e=new t(n),n.data("menu",e)),e}}(window,jQuery),function(n,e){"use strict";function t(n,e){this.init(n,e)}var a=t.prototype;a.init=function(n,t){var a=this,i=e.getMenuHtml(t);e.inst=a,a.elem=n,n.html(i),setTimeout(function(){a.width=n.outerWidth(),a.menu=e.menu(n.children().children().eq(0)),a.menu.onLinkActivate(a.hide.bind(a))},100)},a.show=function(){var n=this;return n.visible=!0,n.elem.css("left",0),n},a.hide=function(){var n=this;return n.visible=!1,n.elem.css("left",-n.width),n},a.toggle=function(){var n=this;return n[n.visible?"hide":"show"](),n},a.isVisible=function(){return this.visible},a.stopClickProp=function(n){n.stopPropagation()},n.fn.rpGlobalNav=function(e){return this.each(function(){var a=n(this);a.data("globalNav")||a.data("globalNav",new t(a,e))})}}(jQuery,RealPage.GlobalNav),function(n,e){"use strict";function t(n){this.init(n)}var a=t.prototype;a.init=function(e){var t=this;return t.body=n("body"),e.on("click",t.toggleNav.bind(t)),t},a.toggleNav=function(n){var t=this;return e.inst.toggle(),setTimeout(t.bindFollowup.bind(t),10),t},a.bindFollowup=function(){var n=this;return e.inst.isVisible()?n.body.one("click.globalNav",n.bodyClickHandler.bind(n)):n.body.off("click.globalNav"),n},a.bodyClickHandler=function(){var n=this;return e.inst.hide(),n},n.fn.rpGlobalNavToggle=function(){return this.each(function(){var e=n(this);e.data("globalNavToggle")||e.data("globalNavToggle",new t(e))})}}(jQuery,RealPage.GlobalNav),angular.module("rpGlobalNav",[]),function(n){"use strict";n.module("rpGlobalNav").directive("rpGlobalNavToggle",[function(){return{scope:{},link:function(n,e,t){e.rpGlobalNavToggle()},restrict:"E",replace:!0,template:"<div class='rp-global-nav-toggle'></div>"}}])}(angular),function(n){"use strict";n.module("rpGlobalNav").directive("rpGlobalNav",["pubsub","rpGlobalNavModel",function(n,e){return{scope:{},link:function(t,a,i){var l={};l.init=function(){e.isReady()?l.initNav():e.subscribe(l.initNav),l.prefWatch=n.subscribe("gn.themeUpdate",l.updatePref)},l.initNav=function(){a.rpGlobalNav(e.getData())},l.updatePref=function(n){a[n.dark?"removeClass":"addClass"]("theme-1")},l.init()},restrict:"E",replace:!0,template:"<div class='rp-global-nav'></div>"}}])}(angular),function(n,e){"use strict";n.module("rpGlobalNav").factory("rpGlobalNavModel",["eventStream",function(n){function e(){this.init()}var t=e.prototype;return t.init=function(){var e=this;e.data=[],e.ready=!1,e.update=n()},t.getData=function(){return this.data},t.setData=function(n){var e=this;return e.data=n,e.ready=!0,e.publish(n),e},t.publish=function(n){var e=this;return e.update.publish(n),e},t.subscribe=function(){var n=this;return n.update.subscribe.apply(n.update,arguments)},t.isReady=function(){return this.ready},t.reset=function(){this.data=[]},new e}])}(angular);