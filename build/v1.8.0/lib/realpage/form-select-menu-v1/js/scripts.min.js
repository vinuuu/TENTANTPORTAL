angular.module("rpFormSelectMenu",[]),angular.module("rpFormSelectMenu").run(["$templateCache",function(e){e.put("realpage/form-select-menu-v1/templates/form-select-menu.html",'<div class="rp-select-menu" ng-class="menu.getState()"><span ng-if="configData.readonly" class="rp-select-menu-readonly" title="{{menu.getDisplayText()}}"></span><select class="rp-form-select-field" id="{{::configData.id}}" name="{{::configData.fieldName}}" ng-blur="menu.onBlur()" ng-change="menu.onChange(rpModel)" ng-disabled="configData.disabled" ng-focus="menu.onFocus()" ng-model-options="configData.modelOptions" ng-model="rpModel" ng-mouseout="menu.onMouseout()" ng-mouseover="menu.onMouseover()" ng-options="option.value as option.name group by option.group for option in configData.options | rpFormSelectMenuFilter: configData" ng-readonly="configData.readonly" ng-required="configData.required" title="{{menu.getDisplayText()}}"></select><div class="rp-select-menu-inner"><span title="{{menu.getDisplayText()}}" class="rp-select-menu-value">{{menu.getDisplayText()}} {{config.getType(menu)}}</span></div><ul class="rp-form-error-msgs"><li ng-if="msg.active" class="rp-form-error-msg" ng-repeat="msg in configData.errorMsgs">{{msg.text}}</li></ul></div>')}]),function(e,t){"use strict";e.module("rpFormSelectMenu").factory("rpFormSelectMenuConfig",[function(){function n(){this.init()}var a=1,o=n.prototype;return o.init=function(){var t=this;return t._id=a++,t._name="SelectMenuConfig",t.keys=[],t.fieldId="select-menu-"+a,t.data={size:"",options:[],disabled:!1,displayText:"",dynamicDisplayText:!0,errorMsgs:[],fieldName:t.fieldId,id:t.fieldId,modelOptions:{allowInvalid:!0,updateOn:"default"},nameKey:"name",onChange:e.noop,readonly:!1,required:!1,valueKey:"value",groupKey:"group",asyncValidators:{},validators:{},optionsFilter:{}},t},o.getData=function(){return this.data},o.getOptionName=function(e){var t;return this.data.options.forEach(function(n){n.value===e&&(t=n.name)}),t},o.getOptionValue=function(e){var t;return this.data.options.forEach(function(n){n.value===e&&(t=n.value)}),t},o.setData=function(t){var n=this;return e.extend(n.data,t||{}),n},o.setOptions=function(e){var t=this;return t.flushOptions().addOptions(e),t},o.setOptionsFilter=function(e){var t=this;return t.data.optionsFilter=e,t},o.isValidOption=function(e){var n=this;return e&&e[n.data.nameKey]!==t&&e[n.data.valueKey]!==t&&-1==n.keys.indexOf(e[n.data.nameKey])},o.hasErrorMsgs=function(){var e=this;return e.data.errorMsgs&&!e.data.errorMsgs.empty()},o.hasGroupKey=function(e){var n=this;return n.data.groupKey!==t&&e[n.data.groupKey]!==t},o.addOptions=function(e){var t=this;return e&&e.push&&e.forEach(t.addOption.bind(t)),t},o.addOption=function(e){var t=this;if(t.isValidOption(e)){t.keys.push(e[t.data.nameKey]);var n={name:e[t.data.nameKey],value:e[t.data.valueKey]};t.hasGroupKey(e)&&(n.group=e[t.data.groupKey]),t.data.options.push(n)}return t},o.flushOptions=function(){var e=this;return e.keys.flush(),e.data.options.flush(),e},o.destroy=function(){var e=this;return e.flushOptions(),e.data=t,e},function(e){return(new n).setData(e)}}])}(angular),function(e,t){"use strict";e.module("rpFormSelectMenu").directive("rpFormSelectMenu",["timeout",function(t){function n(e,t,n){e.configData=e.config.getData(),e.config.hasErrorMsgs()&&t.addClass("has-error-msgs")}return{scope:{config:"=",rpModel:"="},restrict:"E",replace:!0,compile:function(t,a,o){return{pre:n,post:e.noop}},templateUrl:"realpage/form-select-menu-v1/templates/form-select-menu.html"}}])}(angular),function(e,t){"use strict";e.module("rpFormSelectMenu").directive("rpFormSelectField",["timeout",function(n){return{link:function(a,o,r,i){var s={},u=a.config,l=a.configData;s.init=function(){s.state={hover:!1,focus:!1},s.errorState={},l.size&&(s.state[l.size]=!0),s.hasValidators()&&e.extend(i.$validators,l.validators),s.hasAsyncValidators()&&e.extend(i.$asyncValidators,l.asyncValidators),Object.keys(i.$validators).forEach(function(e){s.errorState[e]=!1}),s.destWatch=a.$on("$destroy",s.destroy),a.menu=s},s.hasAsyncValidators=function(){return l.asyncValidators&&0!==Object.keys(l.asyncValidators).length},s.hasValidators=function(){return l.validators&&0!==Object.keys(l.validators).length},s.getState=function(){return e.extend(s.state,{dirty:i.$dirty,error:i.$invalid,touched:i.$touched,readonly:l.readonly,disabled:l.disabled},s.errorState,i.$error),l.errorMsgs.forEach(function(e){e.active=i.$error[e.name]}),s.state},s.onFocus=function(){s.state.focus=!0},s.onBlur=function(){s.state.focus=!1},s.onMouseover=function(){s.state.hover=!0},s.onMouseout=function(){s.state.hover=!1},s.onChange=function(e){var t=l.onChange;t&&"function"==typeof t&&(s.timer=n(function(){t(e)}))},s.getDisplayText=function(){return l.dynamicDisplayText?u.getOptionName(a.rpModel):l.displayText},s.destroy=function(){s.destWatch(),n.cancel(s.timer),s=t,i=t,u=t,l=t,a.menu=t,a=t},s.init()},restrict:"C",require:"ngModel"}}])}(angular),function(e){"use strict";e.module("rpFormSelectMenu").filter("rpFormSelectMenuFilter",["$filter",function(t){return function(n,a){var o,r=[];return n=n.filter(function(e){return""===e.value&&(r=[e]),""!==e.value}),o=e.isFunction(a.optionsFilter)?a.optionsFilter(n):t("filter")(n,a.optionsFilter),r.concat(o)}}])}(angular);