angular.module("rpAccordion",[]),function(e,t){"use strict";e.module("rpAccordion").directive("rpAccordionPanel",["timeout","rpAccordionSvc",function(n,o){var i=0;return{link:function(r,c,a){i++;var l={};l.init=function(){var e=l.getAcID(),t=l.getConfig();l.acID=e,l.stateReady=!1,l.panelID="panel"+i,l.click="click."+l.panelID,l.model=o.get(e),l.model.register(l.panelID,l),n(l.initTitle,100),r[t.instName]=l,l.destWatch=r.$on("$destroy",l.destroy)},l.initState=function(){var e=l.title.outerHeight();0===e||l.stateReady||(l.stateReady=!0,l.state={isOpen:c.hasClass("expand")},l.state.isOpen||(c.css({overflow:"hidden",height:e}),l.title.addClass("collapsed")))},l.initTitle=function(){l.title=c.children(".rp-accordion-panel-title"),l.title.on(l.click,l.toggle),l.initState()},l.getAcID=function(){return c.parents("[rp-accordion]:first").attr("rp-accordion")},l.getConfig=function(){return l.config=e.extend({onAfterOpen:e.noop,onAfterClose:e.noop,onBeforeOpen:e.noop,onBeforeClose:e.noop,instName:"rpAcPanel"+i},r.$eval(a.rpAccordionPanel)||{}),l.config},l.toggle=function(){var e=l.state.isOpen;l.model[e?"collapse":"expand"](l.panelID)},l.expand=function(){if(!l.state.isOpen){l.getConfig().onBeforeOpen();var e=c[0].scrollHeight;l.animHeight(e),l.state.isOpen=!0,l.title.removeClass("collapsed")}},l.collapse=function(){if(l.state.isOpen){l.getConfig().onBeforeClose();var e=l.title.outerHeight();c.css("overflow","hidden"),l.animHeight(e),l.state.isOpen=!1,l.title.addClass("collapsed")}},l.animHeight=function(e){c.animate({height:e},250,l.onAnimComplete)},l.onAnimComplete=function(){l.state.isOpen?(c.css({height:"",overflow:""}),l.getConfig().onAfterOpen()):l.getConfig().onAfterClose()},l.destroy=function(){l.destWatch(),l.title&&l.title.off(l.click),l.model.remove(l.panelID),delete r[l.config.name],l.model.isEmpty()&&o.destroy(l.acID),l=t,a=t,c=t,r=t},l.init()},restrict:"A"}}])}(angular),function(e,t){"use strict";e.module("rpAccordion").factory("rpAccordionModel",[function(){function n(){this.init()}var o=n.prototype;return o.init=function(){this.panels={}},o.register=function(e,t){var n=this;return n.panels[e]=t,n},o.remove=function(e){var t=this;return delete t.panels[e],t},o.expand=function(t){var n=this;return e.forEach(n.panels,function(e,n){e[n==t?"expand":"collapse"]()}),n},o.collapse=function(e){var t=this;return t.panels[e].collapse(),t},o.isEmpty=function(){var e=this;return 0===Object.keys(e.panels).length},o.destroy=function(){this.panels=t},function(){return new n}}])}(angular),function(e,t){"use strict";e.module("rpAccordion").service("rpAccordionSvc",["rpAccordionModel",function(e){var t=this;t.models={},t.get=function(n){return t.models[n]=t.models[n]||e(),t.models[n]},t.destroy=function(e){delete t.models[e]}}])}(angular);