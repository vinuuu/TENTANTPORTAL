window.AngularSlider=function(e,n,t){function i(e){c.cssText=e}function r(e,n){return typeof e===n}var a,l,s={},o=n.documentElement,u=n.createElement("modernizr"),c=u.style,f=n.createElement("input"),d=":)",p={},b={},h=[],m=h.slice,g={}.hasOwnProperty;l=r(g,"undefined")||r(g.call,"undefined")?function(e,n){return n in e&&r(e.constructor.prototype[n],"undefined")}:function(e,n){return g.call(e,n)},Function.prototype.bind||(Function.prototype.bind=function(e){var n=this;if("function"!=typeof n)throw new TypeError;var t=m.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=n.prototype;var a=new r,l=n.apply(a,t.concat(m.call(arguments)));return Object(l)===l?l:a}return n.apply(e,t.concat(m.call(arguments)))};return i});for(var v in p)l(p,v)&&(a=v.toLowerCase(),s[a]=p[v](),h.push((s[a]?"":"no-")+a));return s.input||(s.inputtypes=function(e){for(var i,r,a,l=0,s=e.length;l<s;l++)f.setAttribute("type",r=e[l]),(i="text"!==f.type)&&(f.value=d,f.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&f.style.WebkitAppearance!==t?(o.appendChild(f),i=(a=n.defaultView).getComputedStyle&&"textfield"!==a.getComputedStyle(f,null).WebkitAppearance&&0!==f.offsetHeight,o.removeChild(f)):/^(search|tel)$/.test(r)||(i=/^(url|email)$/.test(r)?f.checkValidity&&!1===f.checkValidity():f.value!=d)),b[e[l]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))),s.addTest=function(e,n){if("object"==typeof e)for(var i in e)l(e,i)&&s.addTest(i,e[i]);else{if(e=e.toLowerCase(),s[e]!==t)return s;n="function"==typeof n?n():n,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(n?"":"no-")+e),s[e]=n}return s},i(""),u=f=null,s._version="2.7.1",s}(0,this.document),function(e,n,t){function i(e){return"[object Function]"==m.call(e)}function r(e){return"string"==typeof e}function a(){}function l(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=g.shift();v=1,e?e.t?b(function(){("c"==e.t?d.injectCss:d.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):v=0}function o(e,t,i,r,a,o,u){function c(n){if(!p&&l(f.readyState)&&(B.r=p=1,!v&&s(),f.onload=f.onreadystatechange=null,n)){"img"!=e&&b(function(){w.removeChild(f)},50);for(var i in C[t])C[t].hasOwnProperty(i)&&C[t][i].onload()}}var u=u||d.errorTimeout,f=n.createElement(e),p=0,m=0,B={t:i,s:t,e:a,a:o,x:u};1===C[t]&&(m=1,C[t]=[]),"object"==e?f.data=t:(f.src=t,f.type=e),f.width=f.height="0",f.onerror=f.onload=f.onreadystatechange=function(){c.call(this,m)},g.splice(r,0,B),"img"!=e&&(m||2===C[t]?(w.insertBefore(f,y?null:h),b(c,u)):C[t].push(f))}function u(e,n,t,i,a){return v=0,n=n||"j",r(e)?o("c"==n?F:x,e,n,this.i++,t,i,a):(g.splice(this.i++,0,e),1==g.length&&s()),this}function c(){var e=d;return e.loader={load:u,i:0},e}var f,d,p=n.documentElement,b=e.setTimeout,h=n.getElementsByTagName("script")[0],m={}.toString,g=[],v=0,B="MozAppearance"in p.style,y=B&&!!n.createRange().compareNode,w=y?p:h.parentNode,p=e.opera&&"[object Opera]"==m.call(e.opera),p=!!n.attachEvent&&!p,x=B?"object":p?"script":"img",F=p?"script":x,S=Array.isArray||function(e){return"[object Array]"==m.call(e)},P=[],C={},M={timeout:function(e,n){return n.length&&(e.timeout=n[0]),e}};(d=function(e){function n(e){var n,t,i,e=e.split("!"),r=P.length,a=e.pop(),l=e.length,a={url:a,origUrl:a,prefixes:e};for(t=0;t<l;t++)i=e[t].split("="),(n=M[i.shift()])&&(a=n(a,i));for(t=0;t<r;t++)a=P[t](a);return a}function l(e,r,a,l,s){var o=n(e),u=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(r&&(r=i(r)?r:r[e]||r[l]||r[e.split("/").pop().split("?")[0]]),o.instead?o.instead(e,r,a,l,s):(C[o.url]?o.noexec=!0:C[o.url]=1,a.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":t,o.noexec,o.attrs,o.timeout),(i(r)||i(u))&&a.load(function(){c(),r&&r(o.origUrl,s,l),u&&u(o.origUrl,s,l),C[o.url]=2})))}function s(e,n){function t(e,t){if(e){if(r(e))t||(f=function(){var e=[].slice.call(arguments);d.apply(this,e),p()}),l(e,f,n,0,u);else if(Object(e)===e)for(o in s=function(){var n,t=0;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(o)&&(!t&&!--s&&(i(f)?f=function(){var e=[].slice.call(arguments);d.apply(this,e),p()}:f[o]=function(e){return function(){var n=[].slice.call(arguments);e&&e.apply(this,n),p()}}(d[o])),l(e[o],f,n,o,u))}else!t&&p()}var s,o,u=!!e.test,c=e.load||e.both,f=e.callback||a,d=f,p=e.complete||a;t(u?e.yep:e.nope,!!c),c&&t(c)}var o,u,f=this.yepnope.loader;if(r(e))l(e,0,f,0);else if(S(e))for(o=0;o<e.length;o++)u=e[o],r(u)?l(u,0,f,0):S(u)?d(u):Object(u)===u&&s(u,f);else Object(e)===e&&s(e,f)}).addPrefix=function(e,n){M[e]=n},d.addFilter=function(e){P.push(e)},d.errorTimeout=1e4,null==n.readyState&&n.addEventListener&&(n.readyState="loading",n.addEventListener("DOMContentLoaded",f=function(){n.removeEventListener("DOMContentLoaded",f,0),n.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,t,i,r,o,u){var c,f,p=n.createElement("script"),r=r||d.errorTimeout;p.src=e;for(f in i)p.setAttribute(f,i[f]);t=u?s:t||a,p.onreadystatechange=p.onload=function(){!c&&l(p.readyState)&&(c=1,t(),p.onload=p.onreadystatechange=null)},b(function(){c||(c=1,t(1))},r),o?p.onload():h.parentNode.insertBefore(p,h)},e.yepnope.injectCss=function(e,t,i,r,l,o){var u,r=n.createElement("link"),t=o?s:t||a;r.href=e,r.rel="stylesheet",r.type="text/css";for(u in i)r.setAttribute(u,i[u]);l||(h.parentNode.insertBefore(r,h),b(t,0))}}(this,document),AngularSlider.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},angular.module("vr.directives.slider",["ngTouch"]).directive("slider",["$timeout","$document","$interpolate","$swipe",function(e,n,t,i){function r(e){return angular.element(e)}function a(e){return e+"px"}function l(e,n){return e.css({opacity:n})}function s(e){return l(e,0)}function o(e){return l(e,1)}function u(e,n){return e.css({left:n})}function c(e){var n=parseFloat(e.css("width"));return isNaN(n)?e[0].offsetWidth:n}function f(e){return c(e)/2}function d(e){try{return e.offset().left}catch(e){}return e[0].getBoundingClientRect().left}function p(e,n){return d(e)>d(n)?d(e)-d(n)-c(n):d(n)-d(e)-c(e)}function b(e,n){return e.attr("ng-bind-template",n)}function h(e,n,t,i,r){!angular.isUndefined(n)&&n||(n=0),!angular.isUndefined(t)&&t&&0!=t||(t=1/Math.pow(10,n)),!angular.isUndefined(i)&&i||(i=0),!angular.isUndefined(e)&&e||(e=0);var a=(e-i)%t,l=a>t/2?e+t-a:e-a;return!angular.isUndefined(r)&&r||(r=l),l=Math.min(Math.max(l,i),r),parseFloat(l.toFixed(n))}function m(e,n){return Math.floor(e/n+.5)*n}function g(e,n){return e>0&&!isNaN(n)?Math.ceil(n/e)*e:n}function v(e){return y+" "+e+" "+w}var B=3,y=t.startSymbol(),w=t.endSymbol();return{restrict:"EA",require:"ngModel",scope:{floor:"@",ceiling:"@",step:"@",stepWidth:"@",precision:"@",buffer:"@",stickiness:"@",showSteps:"@",ngModel:"=",ngModelRange:"=",ngDisabled:"=",ngChange:"&",translateFn:"&",translateRangeFn:"&",translateCombinedFn:"&",scaleFn:"&",inverseScaleFn:"&"},template:"<span class='bar full'></span><span class='bar steps'><span class='bubble step' ng-repeat='step in stepBubbles()'></span></span><span class='bar selection'></span><span class='bar unselected low'></span><span class='bar unselected high'></span><span class='pointer low'></span><span class='pointer high'></span><span class='bubble low'></span><span class='bubble high'></span><span class='bubble middle'></span><span class='bubble selection'></span><span class='bubble limit floor'></span><span class='bubble limit ceiling'></span><input type='range' class='input low' /><input type='range' class='input high' /><input type='range' class='input selection' />",compile:function(t,l){function y(e){e||(e=t);var n=[];return angular.forEach(e.children(),function(e){n.push(r(e))}),n}function w(e,n,t){return{fullBar:e[0],stepBubs:e[1],selBar:n?e[2]:null,unSelBarLow:n?e[3]:null,unSelBarHigh:n?e[4]:null,minPtr:n?e[5]:e[2],maxPtr:n?e[6]:null,lowBub:n?e[7]:e[3],highBub:n?e[8]:null,cmbBub:n?e[9]:null,selBub:n?e[10]:null,flrBub:n?e[11]:e[4],ceilBub:n?e[12]:e[5],minInput:t?n?e[13]:e[6]:null,maxInput:t&&n?e[14]:null,selInput:t&&n?e[15]:null}}var x=l.showSteps,F=l.stepWidth?"stepWidth":"step",S=null!=l.ngModelRange,P={},C="ngModel",M="ngModelRange",I="selectBar",R=["floor","ceiling","stickiness",C];if(P=function(){for(var e=y(),n=[],t=0,i=e.length;t<i;t++){var a=e[t];(a=r(a)).css({"white-space":"nowrap",position:"absolute",display:"block","z-index":1}),n.push(a)}return n}(),P=w(P,!0,!0),l.translateFn&&l.$set("translateFn",l.translateFn+"(value)"),l.translateRangeFn&&l.$set("translateRangeFnFn",l.translateRangeFn+"(low,high)"),l.translateCombinedFn&&l.$set("translateCombinedFnFn",l.translateCombinedFn+"(low,high)"),l.scaleFn&&l.$set("scaleFn",l.scaleFn+"(value)"),l.inverseScaleFn&&l.$set("inverseScaleFn",l.inverseScaleFn+"(value)"),P.fullBar.css({left:0,right:0}),AngularSlider.inputtypes.range){var k={position:"absolute",margin:0,padding:0,opacity:0,height:"100%"};P.minInput.attr("step",v("inputSteps()")),P.minInput.attr("min",v("floor")),P.minInput.css(k),P.minInput.css("left",0),S?(P.minInput.attr("max",v("ngModelRange - (buffer / 2)")),P.maxInput.attr("step",v("inputSteps()")),P.maxInput.attr("min",v("ngModel + (buffer / 2)")),P.maxInput.attr("max",v("ceiling")),P.maxInput.css(k),P.selInput.attr("step",v("inputSteps()")),P.selInput.attr("min",v("ngModel")),P.selInput.attr("max",v("ngModelRange")),P.selInput.css(k)):(P.minInput.attr("max",v("ceiling")),P.minInput.css({width:"100%"}),P.maxInput.remove(),P.selInput.remove())}else P.minInput.remove(),P.maxInput.remove(),P.selInput.remove();if(b(P.stepBubs.children().eq(0),v("translation(step)")),b(P.ceilBub,v("translation(ceiling)")),b(P.flrBub,v("translation(floor)")),b(P.selBub,v("rangeTranslation("+C+","+M+")")),b(P.lowBub,v("translation("+C+")")),b(P.highBub,v("translation("+M+")")),b(P.cmbBub,v("combinedTranslation("+C+","+M+")")),S)R.push(M),R.unshift("buffer");else for(var N=[P.selBar,P.unSelBarLow,P.unSelBarHigh,P.maxPtr,P.selBub,P.highBub,P.cmbBub],V=0,A=N.length;V<A;V++)(t=N[V]).remove();return R.unshift("precision",F),x||P.stepBubs.children().remove(),{post:function(t,l,b,v){function x(){if(angular.forEach(R,function(e){t[e]=parseFloat(t[e]),e==C||e==M?t[e]=h(t[e],t.precision,t[F],t.floor,t.ceiling):"buffer"==e?!t.buffer||isNaN(t.buffer)||t.buffer<0?t.buffer=0:t.buffer=g(t[F],t.buffer):"precision"==e?!t.precision||isNaN(t.precision)?t.precision=0:t.precision=parseInt(t.precision):e==F?!t[F]||isNaN(t[F])?t[F]=1/Math.pow(10,t.precision):t[F]=parseFloat(t[F].toFixed(t.precision)):"stickiness"==e&&(isNaN(t.stickiness)?t.stickiness=B:t.stickiness<1&&(t.stickiness=1)),t.decodedValues[e]=t.decodeRef(e)}),S){if(t[M]<t[C]){var e=t[M];t[M]=t[C],t[C]=e}var n=h(t[M]-t[C],t.precision,t[F]);if(t.buffer>0&&n<t.buffer){var i=t.encode((t.decodedValues[C]+t.decodedValues[M])/2);t[C]=h(i-t.buffer/2,t.precision,t[F],t.floor,t.ceiling),t[M]=t[C]+t.buffer,t[M]>t.ceiling&&(t[M]=t.ceiling,t[C]=t.ceiling-t.buffer)}}N=c(k.fullBar),V=f(k.minPtr),A=d(k.fullBar),E=A+N-c(k.minPtr),T=E-A,$=t.floor,j=t.decodedValues.floor,U=t.ceiling,L=t.decodedValues.ceiling,O=U-$,H=m(W=L-j,t.decodedValues[F])}function P(){function e(e){return(e-A)/T*100}function b(n){return e(n)/100*W+j}function g(e){return t.encode(b(e))}function B(e){var n=e-j;return O==W?n=m(n,t.decodedValues[F])/H:n/=W,100*n}function y(e){return B(t.decode(e))}function w(e){return a(e*T/100)}function P(e){return Math.min(Math.max(e,A),E)}function R(n){return u(n,w(e(P(d(n)))))}function L(e,n,i){var r=e>0?1:-1;return n=n||100,i?(Math.sin(Math.min(Math.abs(e/n),1)*Math.PI-Math.PI/2)+1)*r*n/6:r*Math.pow(Math.min(Math.abs(e/n*2),1),t.stickiness)*n/2}function q(){var n=B(t.decodedValues[C]),i=y(t[C]+t[F])-n,r=n-y(t[C]-t[F]),a=y(t[C]+t.buffer)-n,l=e(V+A),s=n+L(z,z>0?i:r);if(u(k.minPtr,w(s)),u(k.lowBub,w(e(d(k.minPtr)-f(k.lowBub)+V))),S){var o=B(t.decodedValues[M]),c=y(t[M]+t[F])-o,p=o-y(t[M]-t[F]),b=o-y(t[M]-t.buffer),h=o+L(D,D>0?c:p);if(s>o-b&&(s=n+L(z,a,!0),u(k.minPtr,w(s)),u(k.lowBub,w(e(d(k.minPtr)-f(k.lowBub)+V)))),h<n+a&&(h=o+L(D,b,!0)),u(k.maxPtr,w(h)),u(k.highBub,w(e(d(k.maxPtr)-f(k.highBub)+V))),u(k.selBar,w(s+l)),k.selBar.css({width:w(h-s)}),u(k.selBub,w((s+h)/2-e(f(k.selBub)+A)+l)),u(k.cmbBub,w((s+h)/2-e(f(k.cmbBub)+A)+l)),k.unSelBarLow.css({left:0,width:w(s+l)}),u(k.unSelBarHigh,w(h+l)),k.unSelBarHigh.css({right:0}),AngularSlider.inputtypes.range){var m=2*l,g=s+a/2,v=100-g;g+=m;var x=h-b/2,P=s+m,I=h-s-m;h<=s+m&&(P=s,I=h+m-s),k.minInput.css({width:w(x)}),k.maxInput.css({left:w(g),width:w(v)}),k.selInput.css({left:w(P),width:w(I)})}}}function X(){var e=k.lowBub;R(k.lowBub),S&&(R(k.highBub),R(k.selBub),p(k.lowBub,k.highBub)<10?(s(k.lowBub),s(k.highBub),o(k.cmbBub),R(k.cmbBub),e=k.cmbBub):(o(k.lowBub),o(k.highBub),s(k.cmbBub),e=k.highBub)),p(k.flrBub,k.lowBub)<5?s(k.flrBub):S&&p(k.flrBub,e)<5?s(k.flrBub):o(k.flrBub),p(k.lowBub,k.ceilBub)<5?s(k.ceilBub):S&&p(e,k.ceilBub)<5?s(k.ceilBub):o(k.ceilBub)}function _(){z=0,D=0,ee&&(q(),X(),ee.removeClass("active")),ee=null,ne=null,Q=!1}function G(n){ee&&t.$apply(function(){var i=n.clientX||n.x;if(Q){var r=g(i)-Y,a=g(i)+Z;r<$?(a+=$-r,r=$):a>U&&(r-=a-U,a=U);var s=y(r),o=y(a);z=s,D=o,t[C]=r=h(r,t.precision,t[F],t.floor,t.ceiling),t[M]=a=h(a,t.precision,t[F],t.floor,t.ceiling),z-=y(r),D-=y(a)}else{var u=e(P(i+A-d(l)-f(ee))),c=t.encode(j+W*u/100);if(z=u,S)if(t.buffer>0)ne===C?c>t[M]-t.buffer&&(c=t[M]-t.buffer):c<t[C]+t.buffer&&(c=t[C]+t.buffer);else if(ne===C){if(c>t[M]){t[C]=t[M],t.decodedValues[C]=t.decodeRef(C),ne=M;p=k.minPtr;k.minPtr=k.maxPtr,k.maxPtr=p,k.maxPtr.removeClass("active").removeClass("high").addClass("low"),k.minPtr.addClass("active").removeClass("low").addClass("high")}}else if(c<t[C]){t[M]=t[C],t.decodedValues[M]=t.decodeRef(M),ne=C;var p=k.minPtr;k.minPtr=k.maxPtr,k.maxPtr=p,k.minPtr.removeClass("active").removeClass("low").addClass("high"),k.maxPtr.addClass("active").removeClass("high").addClass("low")}t[ne]=c=h(c,t.precision,t[F],t.floor,t.ceiling),t.decodedValues[ne]=t.decodeRef(ne),ne===C?(z-=y(c),D=0):(D=z-y(c),z=0)}t.ngChange&&t.ngChange(),v.$setViewValue(t[C]),q(),X()})}function K(e,n,i){if(!t.ngDisabled||1!=t.ngDisabled){var r=e.clientX||e.x;if(ee=n,ne=i,ee.addClass("active"),ne==I){Q=!0;var a=g(r);Y=a-t[C],Z=t[M]-a}G(e)}}var Q,Y,Z,ee,ne;x(),u(k.flrBub,0),u(k.ceilBub,a(N-c(k.ceilBub))),q(),X(),J||(!function(){function e(e,n,t){e=r(e),i.bind(e,{start:function(e){K(e,n,t)},move:G,end:function(e){G(e),_()},cancel:_})}function t(e,n,t){e=r(e),t=angular.isUndefined(t)?e:r(t),i.bind(e,{start:function(e){K(e,t,n)}})}AngularSlider.inputtypes.range?(e(k.minInput,k.minPtr,C),S&&(e(k.maxInput,k.maxPtr,M),e(k.selInput,k.selBar,I))):(function(e){e=r(e),i.bind(e,{move:G,end:function(e){G(e),_()},cancel:_})}(n),t(k.minPtr,C),t(k.lowBub,C),t(k.flrBub,C,k.minPtr),S?(t(k.maxPtr,M),t(k.highBub,M),t(k.ceilBub,M,k.maxPtr),t(k.selBar,I),t(k.selBub,I,k.selBar),t(k.unSelBarLow,C,k.minPtr),t(k.unSelBarHigh,M,k.maxPtr)):(t(k.ceilBub,C,k.minPtr),t(k.fullBar,C,k.minPtr)))}(),J=!0)}var k=w(y(l),S,AngularSlider.inputtypes.range);t.decodedValues={floor:0,ceiling:0,step:0,stepWidth:0,precision:0,buffer:0,stickiness:0,ngModel:0,ngModelRange:0},t.translation=function(e){return e=parseFloat(e).toFixed(t.precision),angular.isUndefined(b.translateFn)?""+e:t.translateFn({value:e})},t.rangeTranslation=function(e,n){return angular.isUndefined(b.translateRangeFn)?"Range: "+t.translation((n-e).toFixed(t.precision)):t.translateRangeFn({low:e,high:n})},t.combinedTranslation=function(e,n){return angular.isUndefined(b.translateCombinedFn)?t.translation(e)+" - "+t.translation(n):t.translateCombinedFn({low:e,high:n})},t.encode=function(e){return angular.isUndefined(b.scaleFn)||""==b.scaleFn?e:t.scaleFn({value:e})},t.decode=function(e){return angular.isUndefined(b.inverseScaleFn)||""==b.inverseScaleFn?e:t.inverseScaleFn({value:e})},1==Math.round(t.encode(t.decode(1)))&&100==Math.round(t.encode(t.decode(100)))||console.warn("The scale and inverseScale functions are not perfect inverses: 1 = "+t.encode(t.decode(1))+"  100 = "+t.encode(t.decode(100))),t.decodeRef=function(e){return t.decode(t[e])},t.inputSteps=function(){return Math.pow(10,-1*t.precision)};for(var N=0,V=0,A=0,E=0,T=0,$=0,j=0,U=0,L=0,O=0,W=0,H=1,z=0,D=0,J=!1,q=0;q<R.length;q++)t.$watch(R[q],function(){P()});r(window).bind("resize",function(){P()}),t.$on("refreshSlider",function(){e(function(){P()})}),e(function(){P()})}}}}}]);