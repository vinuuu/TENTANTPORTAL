angular.module("rpActionsMenu",[]),function(t){"use strict";function n(){function t(t,n,e){}return{link:t,restrict:"E",replace:!0,templateUrl:"realpage/actions-menu/templates/actions-menu-panel.html"}}t.module("rpActionsMenu").directive("rpActionsMenuPanel",[n])}(angular),function(t,n){"use strict";function e(e,a,o){function i(i,r,l){var u,d={},f=i.$eval(l.model),p="click.actionsMenu"+c++,m="<rp-actions-menu-panel model='actionsMenuModel' />";d.init=function(){f&&(o(d.initBody),i.rpActionsMenu=d,d.initElem().loadContext().initPanel()),d.destWatch=i.$on("$destroy",d.destroy)},d.initBody=function(){s=s||t.element("body")},d.initElem=function(){return r.on(p,d.togglePanelHandler),r.html(f.getToggleText()).addClass(f.getToggleClassNames()),d},d.initPanel=function(){var t=e.$new();t.model=f,u=a(m)(t),o(d.appendPanel)},d.appendPanel=function(){s.append(u)},d.loadContext=function(){return f.forEachAction(function(t){t.loadContext(i)}),d},d.togglePanel=function(t){f.togglePanel().setPanelPosition({top:r.offset().top+f.getOffsetTop(),left:r.offset().left+f.getOffsetLeft()}),f.panelIsVisible()?o(d.bindHide,10):s.off(p)},d.togglePanelHandler=function(t){i.$apply(function(){d.togglePanel(t)})},d.hidePanel=function(){i.$apply(f.hidePanel.bind(f))},d.bindHide=function(){s.one(p,d.hidePanel)},d.destroy=function(){s.off(p),f.hidePanel(),r.off(),u.remove(),d.destWatch(),d=n,r=n,u=n,f=n,p=n,i=n,m=n},d.init()}var s,c=1;return{link:i,restrict:"C"}}t.module("app").directive("rpActionsMenu",["$rootScope","$compile","$timeout",e])}(angular),function(t,n){"use strict";function e(){function t(){this.init()}var e=t.prototype;return e.init=function(){var t=this;return t.data={},t},e.setData=function(t){var n=this;return n.data=t||{},n},e.loadContext=function(t){var n=this;return n.data.context=n.data.context||{},n.data.contextKeys&&n.data.contextKeys.forEach(function(e){n.data.context[e]=t[e]}),n},e.activate=function(){var t=this;t.data.method&&("function"!=typeof t.data.method||t.data.method(t.data.context))},e.destroy=function(){var t=this;return t.data=n,t},function(n){return(new t).setData(n)}}t.module("rpActionsMenu").factory("rpActionsMenuAction",[e])}(angular),function(t,n){"use strict";function e(e){function a(){this.init()}var o=1,i=a.prototype;return i.init=function(){var t=this;return t.id=o++,t.data={actions:[],toggleText:"",menuOffsetTop:20,menuOffsetLeft:5,menuClassNames:"",toggleClassNames:"rp-icon-more"},t.panel={show:!1,position:{}},t},i.getOffsetLeft=function(){return this.data.menuOffsetLeft},i.getOffsetTop=function(){return this.data.menuOffsetTop},i.getToggleClassNames=function(){return this.data.toggleClassNames},i.getToggleText=function(){return this.data.toggleText},i.setActions=function(t){var n=this;return n.actions=[],n.addActions(t),n},i.setData=function(n){var e=this;return t.extend(e.data,n||{}),e.setActions(e.data.actions),e},i.setPanelPosition=function(n){var e=this;return t.extend(e.panel.position,n),e},i.panelIsVisible=function(){return this.panel.show},i.addActions=function(t){var n=this;return n.fixActions(t),t.forEach(function(t){n.actions.push(e(t))}),n},i.fixActions=function(t){t.forEach(function(t){t.data&&(t.context=t.data,delete t.data)})},i.forEachAction=function(t){var n=this;return n.actions.forEach(t),n},i.hidePanel=function(){var t=this;return t.panel.show=!1,t},i.togglePanel=function(){var t=this;return t.panel.show=!t.panel.show,t},i.destroy=function(){var t=this;return t.actions.forEach(function(t){t.destroy()}),t.actions=n,t},function(t){return(new a).setData(t)}}t.module("rpActionsMenu").factory("rpActionsMenuModel",["rpActionsMenuAction",e])}(angular),angular.module("app").run(["$templateCache",function(t){t.put("realpage/actions-menu/templates/actions-menu-panel.html",'<div ng-if="model.panel.show" ng-style="model.panel.position" ng-class="{open: model.panel.show}" class="{{::model.data.menuClassNames}} rp-actions-menu-panel dropdown"><ul class="rp-actions-menu-list dropdown-menu dropdown-menu-scale dropdown-menu-width"><li ng-hide="action.data.disabled" ng-repeat="action in model.actions" class="rp-actions-menu-item {{::action.data.classNames}}"><a ng-if="action.data.href" href="{{::action.data.href}}" class="rp-actions-menu-item-text {{::action.data.iconClassNames}}">{{::action.data.text}} </a><span ng-if="!action.data.href" ng-click="action.activate()" class="rp-actions-menu-item-text {{::action.data.iconClassNames}}">{{::action.data.text}}</span></li></ul></div>'),t.put("realpage/actions-menu/templates/actions-menu.html",'<span ng-click="rpActionsMenu.togglePanel($event)" class="rp-actions-menu {{::model.data.toggleClassNames}}">{{::model.data.toggleText}}</span>')}]);