angular.module("rpWizard",[]),function(t){"use strict";function e(){function t(t,e,r){var i={},a=t.model;i.init=function(){t.rpWizardNav=i,i.destWatch=t.$on("$destroy",i.destroy)},i.getBarStyle=function(){return{width:i.getBarWidth()+"%"}},i.getBarWidth=function(){var t=a.getStepCount();return 100*a.getCurrentStepIndex()/(t-1)},i.getTrackLeft=function(){return 100/(2*a.getStepCount())},i.getTrackStyle=function(){return{left:i.getTrackLeft()+"%",width:i.getTrackWidth()+"%"}},i.getTrackWidth=function(){return 100-2*i.getTrackLeft()},i.goTo=function(t){t.isDisabled()||a.goTo(t)},i.destroy=function(){i.destWatch(),t.rpWizardNav=void 0,i=void 0,t=void 0,a=void 0},i.init()}return{scope:{model:"="},link:t,restrict:"E",replace:!0,templateUrl:"realpage/wizard/templates/wizard-nav.html"}}t.module("rpWizard").directive("rpWizardNav",[e])}(angular),function(t){"use strict";function e(t){function e(e,r,i){var a={};t.get(i.rpWizardId);a.init=function(){e.rpWizardStep=a,a.destWatch=e.$on("$destroy",a.destroy)},a.destroy=function(){a.destWatch(),a=void 0,i=void 0,r=void 0,e=void 0},a.init()}return{link:e,restrict:"C"}}t.module("rpWizard").directive("rpWizardStep",["rpWizardNavModelFactory",e])}(angular),function(t){"use strict";function e(t){function e(e,r,i){var a,n={},s="click.rpWizardAction";n.init=function(){a=n.bindClick().getModel(),n.destWatch=e.$on("$destroy",n.destroy)},n.bindClick=function(){return r.on(s,n.clickHandler),n},n.getModel=function(){var r=e.$eval(i.rpWizardAction);return t.get(r.wizardModelID)},n.clickHandler=function(){var t=n.getClickMethod();n[t]()},n.getClickMethod=function(){return r.hasClass("prev-step")?"goToPrevStep":"goToNextStep"},n.goToPrevStep=function(){a.goToPrevStep()},n.goToNextStep=function(){a.goToNextStep()},n.destroy=function(){r.off(s),n.destWatch(),n=void 0,i=void 0,r=void 0,a=void 0,s=void 0,e=void 0},n.init()}return{link:e,restrict:"A"}}t.module("rpWizard").directive("rpWizardAction",["rpWizardNavModelFactory",e])}(angular),function(t,e){"use strict";function r(r,i){function a(){this.init()}var n=a.prototype;return n.init=function(){var t=this;t.data={last:!1,first:!1,active:!1,visited:!1,complete:!1,disabled:!1,index:e},t.validators={}},n.setData=function(e){var r=this;return t.extend(r.data,e||{}),r},n.setValidators=function(e){var r=this;return t.extend(r.validators,e),r},n.getState=function(){var t=this;return{last:t.data.last,first:t.data.first,active:t.data.active,visited:t.data.visited,complete:t.data.complete,disabled:t.data.disabled}},n.getID=function(){return this.data.id},n.getIndex=function(){return this.data.index},n.is=function(t){var e=this;return t.getNumber()==e.data.number},n.isActive=function(){return this.data.active},n.isComplete=function(){return this.data.complete},n.isDisabled=function(){return this.data.disabled},n.isFirst=function(){return this.data.first},n.isLast=function(){return this.data.last},n.isVisited=function(){return this.data.visited},n.isValid=function(){var e=this,r=!0;return t.forEach(e.validators,function(t){r=r&&t()}),r},n.activate=function(){var t=this;return t.data.active=!0,t},n.complete=function(){var t=this;return t.data.complete=!0,t},n.deactivate=function(){var t=this;return t.visited(),t.data.active=!1,t},n.disable=function(){var t=this;return t.data.disabled=!0,t},n.enable=function(){var t=this;return t.data.disabled=!1,t},n.visited=function(){var t=this;return t.data.visited=!0,t},n.goTo=function(){var t=this;return t.data.sref?r.go(t.data.sref):t.data.url&&i.url(t.data.url),t},n.incomplete=function(){var t=this;return t.data.complete=!1,t},n.destroy=function(){},function(t){return(new a).setData(t)}}t.module("rpWizard").factory("rpWizardNavStepModel",["$state","$location",r])}(angular),function(t,e){"use strict";function r(r){function i(){this.init()}var a=i.prototype;return a.init=function(){var t=this;t.stack={},t.stepsList=[]},a.getStepCount=function(){return this.stepsList.length},a.getCurrentStepIndex=function(){return this.currentStep.getIndex()},a.setSteps=function(t){var e=this,i=t.length-1;return t.forEach(function(t,a){var n=r();e.updateStepData(t,a,i),e.stack[t.id]=n,e.stepsList.push(n.setData(t)),n.isActive()&&(e.currentStep=n)}),e},a.setValidators=function(t,e){var r=this;return r.stack[t].setValidators(e),r},a.hasNext=function(){return!this.currentStep.isLast()},a.completeCurrentStep=function(){var t=this;return t.currentStep.complete(),t},a.goTo=function(t){var e=this,r=t.getIndex();return e.currentStep.isValid()?(e.currentStep.deactivate(),e.currentStep=t.activate().goTo(),e.stepsList[r+1]&&e.stepsList[r+1].enable(),e):e},a.goToNextStep=function(){var t=this,e=t.currentStep.getIndex()+1;return t.currentStep.isValid()?(t.currentStep.isLast()||(t.currentStep.deactivate(),t.currentStep=t.stepsList[e].activate().goTo()),t):t},a.goToPrevStep=function(){var t=this,e=t.currentStep.getIndex()-1;return t.currentStep.isValid()?(t.currentStep.isFirst()||(t.currentStep.deactivate(),t.currentStep=t.stepsList[e].activate().goTo()),t):t},a.updateStepData=function(e,r,i){return t.extend(e,{index:r,number:r+1,first:0===r,last:r==i})},a.destroyStep=function(t){t.destroy()},a.destroy=function(){var t=this;t.stepsList.forEach(t.destroyStep),t.stepsList.flush(),t.stepsList=e},function(){return new i}}t.module("rpWizard").factory("rpWizardNavModel",["rpWizardNavStepModel",r])}(angular),function(t){"use strict";function e(t){var e=this;e.storage={},e.get=function(t){return e.storage[t]?e.storage[t]:e.gen(t)},e.gen=function(r){return e.storage[r]=t(),e.storage[r]},e.destroy=function(t){e.storage[t].destroy(),delete e.storage[t]}}t.module("rpWizard").service("rpWizardNavModelFactory",["rpWizardNavModel",e])}(angular),angular.module("rpWizard").run(["$templateCache",function(t){t.put("realpage/wizard/templates/wizard-nav.html",'<div class="rp-wizard-nav"><div class="rp-wizard-progress-bar" ng-style="rpWizardNav.getTrackStyle()"><span class="bar" ng-style="rpWizardNav.getBarStyle()"></span></div><ul class="rp-wizard-nav-steps"><li ng-class="stepModel.getState()" ng-click="rpWizardNav.goTo(stepModel)" ng-repeat="stepModel in model.stepsList" class="rp-wizard-nav-cell rp-wizard-nav-step"><span class="rp-wizard-nav-step-link"><span class="rp-wizard-nav-step-number">{{stepModel.data.number}}</span> <span class="rp-wizard-nav-step-text">{{stepModel.data.text}}</span></span></li></ul></div>')}]);