angular.module("rpComplexGrid",[]),angular.module("rpComplexGrid").run(["$templateCache",function(e){e.put("realpage/complex-grid/templates/grid-editable.html",'<div class="rp-cg-editable"><span class="rp-cg-text rp-cg-body-text" ng-bind="column.val.toLocaleString() || \'&nbsp;\'"></span><div class="rp-input-text small"><input ng-model="column.val" ng-change="column.triggerUpdate()" ng-model-options="{updateOn: \'blur\'}" class="rp-cg-input-text rp-form-input" type="{{column.config.dataType || \'text\'}}"></div></div>'),e.put("realpage/complex-grid/templates/grid-headers.html",'<div class="rp-cg-headers" rp-sticky="{lockTop: 90}"><div class="rp-cg-locked rp-cg-headers-locked" ng-style="{width: model.getLockedWidth()}"><table class="rp-cg-table rp-cg-table-locked rp-cg-headers-table"><tr class="rp-cg-row rp-cg-group-header-row" ng-repeat="groupHeaders in model.groupHeaderRows"><td colspan="{{groupHeader.getColSpan()}}" ng-repeat="groupHeader in groupHeaders" ng-if="groupHeader.isLocked() && groupHeader.isActive()" class="rp-cg-cell rp-cg-group-header-cell {{groupHeader.data.classNames}}"><div class="rp-cg-cell-inner rp-cg-group-header-cell-inner"><span class="rp-cg-text rp-cg-group-header-text">{{::groupHeader.data.text || \'&nbsp;\'}}</span></div></td></tr><tr class="rp-cg-row rp-cg-headers-row"><td ng-repeat="header in model.headers" ng-style="{width: header.config.width}" colspan="{{header.config.colspan || 1}}" rowspan="{{header.config.rowspan || 1}}" ng-if="header.isLocked() && header.isActive()" class="rp-cg-cell rp-cg-headers-cell {{::header.config.classNames}} {{::header.config.key.decamelize()}}"><div class="rp-cg-cell-inner rp-cg-headers-cell-inner"><span ng-class="header.sort" ng-click="model.sortBy(header)" class="rp-cg-text rp-cg-headers-text">{{::header.config.text || \'&nbsp;\'}}</span></div></td></tr></table></div><div class="rp-cg-free rp-cg-headers-free"><table ng-style="{width: model.getFreeWidth()}" class="rp-cg-table rp-cg-table-free rp-cg-headers-table"><tr class="rp-cg-row rp-cg-group-header-row" ng-repeat="groupHeaders in model.groupHeaderRows"><td colspan="{{groupHeader.getColSpan()}}" ng-repeat="groupHeader in groupHeaders" ng-if="!groupHeader.isLocked() && groupHeader.isActive()" class="rp-cg-cell rp-cg-group-header-cell {{groupHeader.data.classNames}}"><div class="rp-cg-cell-inner rp-cg-group-header-cell-inner"><span class="rp-cg-text rp-cg-group-header-text">{{::groupHeader.data.text || \'&nbsp;\'}}</span></div></td></tr><tr class="rp-cg-row rp-cg-headers-row"><td ng-repeat="header in model.headers" ng-style="{width: header.config.width}" colspan="{{header.config.colspan || 1}}" rowspan="{{header.config.rowspan || 1}}" ng-if="!header.isLocked() && header.isActive()" class="rp-cg-cell rp-cg-headers-cell {{::header.config.classNames}} {{::header.config.key.decamelize()}}"><div class="rp-cg-cell-inner rp-cg-headers-cell-inner"><span ng-class="header.sort" ng-click="model.sortBy(header)" class="rp-cg-text rp-cg-headers-text">{{::header.config.text || \'&nbsp;\'}}</span></div></td></tr></table></div></div>'),e.put("realpage/complex-grid/templates/grid.html",'<div ng-class="model.state" class="rp-cg {{model.rowHeightClass}}"><rp-cg-headers model="model.headers"></rp-cg-headers><rp-busy-indicator model="model.busyModel"></rp-busy-indicator><div class="rp-cg-body" ng-class=\'{"highlight-alternate-row": model.highlightAlternateRow}\'><div class="rp-cg-locked rp-cg-body-locked"><table class="rp-cg-table" ng-style="{width: model.getLockedWidth()}"><tr rp-cg-body-row ng-class="row.state" ng-click="row.toggle()" ng-repeat="row in model.rows" ng-if="!row.state.hidden && !row.state.zeroRow"><td class="rp-cg-cell rp-cg-body-cell" ng-repeat="column in row.activeColumns" ng-if="column.isLocked() && column.isActive()"><div class="rp-cg-cell-inner rp-cg-body-cell-inner"><span class="rp-cg-text rp-cg-body-text" title="{{column.val.toLocaleString()}}" ng-bind="column.val.toLocaleString() || \'&nbsp;\'"></span></div></td></tr></table></div><div class="rp-cg-free rp-cg-body-free rp-float-scroll"><table class="rp-cg-table" ng-style="{width: model.getFreeWidth()}"><tr rp-cg-body-row ng-class="row.state" ng-click="row.toggle()" ng-repeat="row in model.rows" ng-if="!row.state.hidden && !row.state.zeroRow"><td class="rp-cg-cell rp-cg-body-cell" ng-repeat="column in row.activeColumns" ng-if="!column.isLocked() && column.isActive()"><div class="rp-cg-cell-inner rp-cg-body-cell-inner"><span class="rp-cg-text rp-cg-body-text" title="{{column.val.toLocaleString()}}" ng-bind="column.val.toLocaleString() || \'&nbsp;\'"></span></div></td></tr></table></div><div class="rp-cg-empty" ng-show="!model.rows.length"><div class="empty-msg" ng-bind-html="model.emptyMsg"></div></div></div></div>')}]),function(e,t){"use strict";function r(r,n){function i(i,o,s){var a={};a.init=function(){a.config=i.column.config,a.config.templateUrl&&a.assembleChild().appendChild(),i.rpCgBodyCell=a,a.addClassNames().setWidth(),a.destWatch=i.$on("$destroy",a.destroy)},a.assembleChild=function(){var t=a.config.templateUrl,o=r.get(t);return o&&(a.child=e.element(o),a.child=n(a.child)(i)),a},a.addClassNames=function(){var e=a.config,t=e.key.decamelize()+" "+(e.classNames||"");return o.addClass(t),a},a.appendChild=function(){return a.child&&o.children().html("").append(a.child),a},a.setWidth=function(){return o.css({width:i.column.getWidth(),maxWidth:i.column.getWidth()}),a},a.destroy=function(){a.child&&a.child.remove(),a.destWatch(),a.child=t,a.config=t,i.rpCgBodyCell=t,o=t,s=t,i=t,a=t},a.init()}return{link:i,restrict:"C"}}e.module("rpComplexGrid").directive("rpCgBodyCell",["$templateCache","$compile",r])}(angular),function(e,t){"use strict";function r(e){function r(r,n,i){var o,s={};s.init=function(){o=r.model,r.rpCgBodyFree=s,n.on("scroll",s.onScroll),s.destWatch=r.$on("$destroy",s.destroy),s.resizeWatch=o.subscribe(e.resize,s.onResize)},s.onScroll=function(){o.publish(e.scroll,n.scrollLeft())},s.onResize=function(e){n.width(e.availWidth-e.lockedWidth)},s.destroy=function(){n.off(),s.destWatch(),s.resizeWatch(),r.rpCgBodyFree=t,s=t,i=t,n=t,o=t,r=t},s.init()}return{link:r,restrict:"C"}}e.module("rpComplexGrid").directive("rpCgBodyFree",["rpCgEventName",r])}(angular),function(e,t){"use strict";function r(e,r,n,i){function o(i,o,s){var a={};a.init=function(){a.addClassNames(),i.row.setVisibilityChecker(a.isVisible),a.destWatch=i.$on("$destroy",a.destroy)},a.addClassNames=function(){return o.addClass(i.row.getClassNames()),a},a.isVisible=function(){var e=o.offset().top,t=n.getScrollTop(),i=r.getSize().height;return e>t&&e<t+i},a.destroy=function(){a.destWatch(),e.cancel(a.timer),i.row.setVisibilityChecker(),a=t,s=t,o=t,i=t},a.init()}return{link:o,restrict:"A"}}e.module("rpComplexGrid").directive("rpCgBodyRow",["timeout","windowSize","windowScroll","rpCgEventName",r])}(angular),function(e,t){"use strict";function r(e){function r(r,n,i){var o,s={};s.init=function(){r.model&&(o=r.model,s.resizeWatch=o.subscribe(e.resize,s.setSize),s.scrollWatch=o.subscribe(e.scroll,s.onScroll),s.destWatch=r.$on("$destroy",s.destroy),r.rpCgHeadersFree=s)},s.onScroll=function(e){n.scrollLeft(e)},s.setSize=function(e){n.width(e.availWidth-e.lockedWidth)},s.destroy=function(){s.destWatch(),s.scrollWatch(),s.resizeWatch(),r.rpCgHeadersFree=t,s=t,i=t,n=t,o=t,r=t},s.init()}return{link:r,restrict:"C"}}e.module("rpComplexGrid").directive("rpCgHeadersFree",["rpCgEventName",r])}(angular),function(e,t){"use strict";function r(e){function r(r,n,i){var o,s={};s.init=function(){r.model&&(o=r.model,r.rpCgHeaders=s,s.destWatch=r.$on("$destroy",s.destroy),s.resizeWatch=o.subscribe(e.resize,s.onResize))},s.onResize=function(e){n.width(e.availWidth)},s.destroy=function(){s.destWatch(),s.resizeWatch(),r.rpCgHeaders=t,s=t,n=t,i=t,r=t,o=t},s.init()}return{scope:{model:"="},link:r,restrict:"E",replace:!0,templateUrl:"realpage/complex-grid/templates/grid-headers.html"}}e.module("rpComplexGrid").directive("rpCgHeaders",["rpCgEventName",r])}(angular),function(e,t){"use strict";function r(r,n,i){function o(o,s,a){var c,u={};u.init=function(){u.visible=!1,o.rpCgOptions=u,u.grid=r(a.targetGrid)(o),u.destWatch=o.$on("$destroy",u.destroy)},u.body=function(){return c=c||e.element("body")},u.toggle=function(){u.visible=!u.visible,u.visible?n(u.bind):u.body().off("click.rpCgOptions")},u.bind=function(){u.body().on("click.rpCgOptions",u.hide)},u.hide=function(){o.$apply(function(){u.visible=!1}),u.body().off("click.rpCgOptions")},u.updateLayout=function(){u.grid.publish(i.dataReady)},u.updateColumns=function(){u.grid.publish(i.updateColumns)},u.destroy=function(){u.destWatch(),u.visible=!1,o.rpCgOptions=t,u=t,c=t,a=t,s=t,o=t},u.init()}return{link:o,restrict:"C"}}e.module("rpComplexGrid").directive("rpCgOptions",["$parse","timeout","rpCgEventName",r])}(angular),function(e,t){"use strict";function r(r,n,i,o){function s(s,a,c){var u,l={};l.init=function(){l.initRuler(),s.rpCg=l,u=s.model,l.destWatch=s.$on("$destroy",l.destroy),l.resizeWatch=i.subscribe(l.setWidth),l.winScrollWatch=o.subscribe(l.setColumns),l.readyWatch=u.subscribe(n.dataReady,l.setWidth),l.scrollWatch=u.subscribe(n.updateScroll,l.updateScroll)},l.initRuler=function(){l.ruler=e.element("<div class='rp-cg-ruler' />"),a.after(l.ruler)},l.removeBusy=function(){a.removeClass("busy")},l.updateScroll=function(){l.timer=r(s.floatScroll.delaySetSize,10)},l.getAvailableWidth=function(){return l.ruler.width()-20},l.calcWidth=function(){var e=u.getTotalWidth(),t=l.getAvailableWidth(),r=u.getLockedWidth();return t=t>e?e:t,{availWidth:t,lockedWidth:r}},l.setWidth=function(){var e=l.calcWidth();a.css("maxWidth",u.getTotalWidth()),l.updateScroll(),u.publish(n.resize,e).setColumns(),l.removeBusyTimer=r(l.removeBusy,10)},l.setColumns=function(){u.delaySetColumns()},l.destroy=function(){l.destWatch(),l.readyWatch(),l.resizeWatch(),l.scrollWatch(),l.ruler.remove(),l.winScrollWatch(),r.cancel(l.timer),r.cancel(l.removeBusyTimer),l.ruler=t,s.rpCg=t,l=t,a=t,c=t,s=t,u=t},l.init()}return{scope:{model:"="},link:s,restrict:"E",replace:!0,templateUrl:"realpage/complex-grid/templates/grid.html"}}e.module("rpComplexGrid").directive("rpCg",["timeout","rpCgEventName","windowSize","windowScroll",r])}(angular),function(e){"use strict";function t(e){return function(t,r){return e.hasFilter(r)?e.getFilter(r)(t):t}}e.module("rpComplexGrid").filter("rpCgFilter",["rpCgFilters",t])}(angular),function(e,t){"use strict";function r(r){function n(){this.init()}var i=n.prototype;return i.init=function(){var e=this;return e.config={classNames:""},e.val="",e},i.setEvents=function(e){var t=this;return t.events=e,t},i.setConfig=function(t){var r=this;return e.extend(r.config,t),r},i.setData=function(e){var t=this;return t.colData=e,t},i.setVal=function(e){var r=this;return r.val=e!==t?e:"",r},i.getKey=function(){return this.config.key},i.getKeyData=function(){var e=this;return e.colData[e.config.key]},i.getMethodName=function(){return this.config.methodName},i.getConfig=function(){return this.config},i.getWidth=function(){return this.config.width},i.isLocked=function(){return this.config.state.locked},i.isActive=function(){return this.config.state.active},i.isDataColumn=function(){return this.config.isDataColumn},i.hasVal=function(e){return this.val===e},i.triggerUpdate=function(){var e=this;return e.colData[e.config.key]=e.val,e.events.publish(r.updateVal),e},i.destroy=function(){var e=this;e.val=t,e.events=t,e.config=t,e.colData=t},function(){return new n}}e.module("rpComplexGrid").factory("rpCgColumnModel",["rpCgEventName",r])}(angular),function(e,t){"use strict";function r(e,r,n,i){function o(){this.init()}var s=o.prototype;return s.init=function(){var t=this;return t.headersModel=e(),t.methodsModel=r(),t.rowConfigModel=n(),t.emptyMsg="No results were found.",t.highlightAlternateRow=!0,t},s.setColHeaderGroups=function(e,t){var r=this;return i.assemble(e,t),r.setGroupHeaderRows(t)},s.setColumns=function(e){var t=this;return t.rowConfigModel.setBaseConfig(e),t},s.setEmptyMsg=function(e){var t=this;return t.emptyMsg=e,t},s.setGroupHeaderRows=function(e){var t=this;return t.headersModel.setGroupHeaderRows(e),t},s.setHeaders=function(e){var t=this;return t.rowConfigModel.setConfig("headers",e),t},s.setHighlightAlternateRow=function(e){var t=this;return t.highlightAlternateRow=e,t},s.setAlternateRow=s.setHighlightAlternateRow,s.setRowConfig=function(e,t){var r=this;return r.rowConfigModel.setConfig(e,t),r},s.getHeaders=function(){var e=this;return e.headersModel.setConfig(e.rowConfigModel).build()},s.getRowConfigModel=function(){return this.rowConfigModel},s.getEmptyMsg=function(){return this.emptyMsg},s.getAlternateRow=function(){return this.highlightAlternateRow},s.getTotalWidth=function(){return this.rowConfigModel.getTotalWidth()},s.getLockedWidth=function(){return this.rowConfigModel.getLockedWidth()},s.getFreeWidth=function(){return this.rowConfigModel.getFreeWidth()},s.getMaxWidth=function(){return this.rowConfigModel.getMaxWidth()},s.getMethod=function(e){return this.methodsModel.getMethod(e)},s.registerMethod=function(e,t){var r=this;return r.methodsModel.register(e,t),r},s.registerMethods=function(e,t){var r=this;return t.forEach(function(t){r.registerMethod(e,t)}),r},s.destroy=function(){var e=this;e.headersModel.destroy(),e.methodsModel.destroy(),e.rowConfigModel.destroy(),e.emptyMsg=t,e.headersModel=t,e.methodsModel=t,e.rowConfigModel=t,e.highlightAlternateRow=t,e.destroy=function(){}},function(){return new o}}e.module("rpComplexGrid").factory("rpCgConfigModel",["rpCgHeadersModel","rpCgMethodsModel","rpCgRowConfigModel","rpCgGroupHeadersSvc",r])}(angular),function(e){"use strict";function t(){return{resize:"resize",expRow:"expRow",colRow:"colRow",scroll:"scroll",sortBy:"sortBy",updateVal:"updateVal",dataReady:"dataReady",toggleRow:"toggleRow",widthReady:"widthReady",updateScroll:"updateScroll",updateColumns:"updateColumns"}}e.module("rpComplexGrid").factory("rpCgEventName",[t])}(angular),function(e,t){"use strict";function r(){function t(){this.init()}var r=t.prototype;return r.init=function(){var e=this;return e.filters={currency:function(e){return"$"+(e=parseFloat(e,10)).toLocaleString()}},e},r.register=function(e,t){var r=this;return r.filters[e]=t,r},r.hasFilter=function(e){return!!this.filters[e]},r.getFilter=function(e){return this.filters[e]},r.extendFilters=function(t){var r=this;return e.extend(r.filters,t),r},new t}e.module("rpComplexGrid").factory("rpCgFilters",[r])}(angular),function(e,t){"use strict";function r(){function r(){this.init()}var n=r.prototype;return n.init=function(){var e=this;return e.data={},e},n.setData=function(t){var r=this;return e.extend(r.data,t),r},n.isLocked=function(){return this.data.locked},n.isActive=function(){return this.getColSpan()>0},n.getColSpan=function(){var e=0;return this.data.subColumnStates.forEach(function(t){t.active&&e++}),e},n.destroy=function(){this.data=t},function(){return new r}}e.module("rpComplexGrid").factory("rpCgGroupHeaderModel",[r])}(angular),function(e,t){"use strict";function r(){function e(){this.init()}var r=e.prototype;return r.init=function(){var e=this;return e.config={},e.sort={active:!1,reverse:!1},e},r.setConfig=function(e){var t=this;return t.config=e,t},r.getKey=function(){return this.config.key},r.getSortDir=function(){return this.sort.reverse},r.is=function(e){return this.getKey()==e.getKey()},r.isLocked=function(){return this.config.state.locked},r.isActive=function(){return this.config.state.active},r.isSortable=function(){return!!this.config.isSortable},r.sortBy=function(e){var t=this;e&&!t.sort.active?t.sort.active=!0:e&&t.sort.active?t.sort.reverse=!t.sort.reverse:(t.sort.active=!1,t.sort.reverse=!1)},r.destroy=function(){this.config=t},function(){return new e}}e.module("rpComplexGrid").factory("rpCgHeaderModel",[r])}(angular),function(e,t){"use strict";function r(e,r,n){function i(){this.init()}var o=i.prototype;return o.init=function(){var e=this;return e.headers=[],e.groupHeaderRows=[],e},o.setEvents=function(e){var t=this;return t.events=e,t},o.setConfig=function(e){var t=this;return t.config=e,t},o.setGroupHeaderRows=function(e){var t=this;return t.groupHeaderRows=[],e.forEach(function(e){var n=[];e.forEach(function(e){var t=r().setData(e);n.push(t)}),t.groupHeaderRows.push(n)}),t},o.getFreeWidth=function(){return this.config.getFreeWidth()},o.getLockedWidth=function(){return this.config.getLockedWidth()},o.publish=function(){var e=this;return e.events.publish.apply(e.events,arguments)},o.subscribe=function(){var e=this;return e.events.subscribe.apply(e.events,arguments)},o.sortBy=function(e){var t=this;return e.isSortable()?(t.headers.forEach(function(r){var i=r.is(e);r.sortBy(i),i&&t.events.publish(n.sortBy,r)}),t):t},o.build=function(){var t=this,r=t.config.getConfig("headers");return t.headers=[],r.forEach(function(r){var n=e().setConfig(r);t.headers.push(n)}),t},o.destroy=function(){var e=this;e.events=t,e.config=t,e.headers.forEach(function(e){e.destroy()}),e.headers.flush(),e.headers=t,e.groupHeaderRows.forEach(function(e){e.forEach(function(e){e.destroy()}),e.flush()}),e.groupHeaderRows.flush(),e.groupHeaderRows=t,e.destroy=function(){}},function(){return new i}}e.module("rpComplexGrid").factory("rpCgHeadersModel",["rpCgHeaderModel","rpCgGroupHeaderModel","rpCgEventName",r])}(angular),function(e,t){"use strict";function r(){function r(){this.init()}var n=r.prototype;return n.init=function(){var e=this;return e.methods={getTotal:e.getTotal.bind(e),getAverage:e.getAverage.bind(e)},e},n.getMethod=function(t){var r=this.methods[t];return r||(r=e.noop),r},n.getTotal=function(e,t,r){var n=0;return e.forEach(function(e){e.isGroupHeader()||e.isAggregate()||(e.isSiblingOf(t)||e.isDescOf(t))&&(n+=parseInt(e.getData()[r.getKey()],10))}),n},n.getAverage=function(e,t,r){var n=0,i=0;return e.forEach(function(e){e.isGroupHeader()||e.isAggregate()||(e.isSiblingOf(t)||e.isDescOf(t))&&(n++,i+=parseInt(e.getData()[r.getKey()],10))}),i/n},n.register=function(e,t){var r=this;return r.methods[t],e[t]&&(r.methods[t]=e[t].bind(e)),r},n.destroy=function(){this.methods=t},function(){return new r}}e.module("rpComplexGrid").factory("rpCgMethodsModel",[r])}(angular),function(e,t){"use strict";function r(){function r(){this.init()}var n=r.prototype;return n.init=function(){var e=this;return e.config={},e.baseConfig={},e},n.setBaseConfig=function(e){var r=this;return r.config.base=e,r.maxWidth=t,e.forEach(function(e){r.baseConfig[e.key]=e}),r},n.setConfig=function(t,r){var n=this,i=[];return r.forEach(function(t){var r=n.baseConfig[t.key]||{};i.push(e.extend({},r,t))}),n.config[t]=i,n},n.getConfig=function(e){var r=this,n=[];return e===t?n=r.config.base:r.config[e]&&(n=r.config[e]),n},n.getLockedWidth=function(){var e=0;return this.config.base.forEach(function(t){t.state.locked&&t.state.active&&(e+=t.width)}),e},n.getFreeWidth=function(){var e=0;return this.config.base.forEach(function(t){!t.state.locked&&t.state.active&&(e+=t.width)}),e},n.getTotalWidth=function(){var e=0;return this.config.base.forEach(function(t){t.state.active&&(e+=t.width)}),e},n.getMaxWidth=function(){var e=this;return e.maxWidth===t&&(e.maxWidth=0,e.config.base.forEach(function(t){e.maxWidth+=t.width})),e.maxWidth},n.destroy=function(){this.config=t},function(){return new r}}e.module("rpComplexGrid").factory("rpCgRowConfigModel",[r])}(angular),function(e,t){"use strict";function r(e,r){function n(){this.init()}var i=n.prototype;return i.init=function(){var e=this;return e.rowData={},e.columns=[],e.activeColumns=[],e.state={open:!0,hidden:!1},e.classNames="",e},i.setEvents=function(e){var t=this;return t.events=e,t},i.setConfig=function(e){var t=this;return t.config=e,t},i.setData=function(e){var t=this,r=e.rowType||"",n=[e.rowClass||"","rp-cg-row","rp-cg-body-row",r.decamelize(),"level-"+e.level];return t.rowData=e,t.classNames=n.join(" "),t},i.setVisibilityChecker=function(e){var t=this;return t.elemIsVisible=e||function(){return!1},t},i.getID=function(){return this.rowData.rowID},i.getGroupID=function(){return this.rowData.groupID},i.getClassNames=function(){return this.classNames},i.getData=function(){return this.rowData},i.getLevel=function(){return this.rowData.level},i.getColumns=function(){return this.columns},i.hasID=function(e){return this.rowData.rowID==e},i.is=function(e){return this.getID()==e.getID()},i.isAggregate=function(){var e=this;return"total"==e.rowData.rowType||"average"==e.rowData.rowType},i.isChildOf=function(e){var t=this;return t.getLevel()==e.getLevel()+1&&t.getGroupID()!=e.getGroupID()},i.isDescOf=function(e){var t=this;return t.getLevel()>e.getLevel()&&t.getGroupID()!=e.getGroupID()},i.isEmpty=function(){return 0===this.activeColumns.length},i.isGroupHeader=function(){return"groupHeader"==this.rowData.rowType},i.isHidden=function(){return this.state.hidden},i.isOpen=function(){return this.state.open},i.isSiblingOf=function(e){var t=this;return t.getLevel()==e.getLevel()&&t.getGroupID()==e.getGroupID()},i.isVisible=function(){var e=this;return e.elemIsVisible&&e.elemIsVisible()},i.activateColumns=function(){var e=this;return e.isEmpty()&&(e.activeColumns=e.columns),e},i.build=function(){var e=this,t=e.rowData.rowType,n=e.config.getConfig(t);return e.columns.flush(),n.forEach(function(t){var n=r();n.setEvents(e.events).setConfig(t),e.columns.push(n.setData(e.rowData))}),e},i.forEachColumn=function(e){var t=this;return t.columns.forEach(e),t},i.open=function(e){var t=this;return t.state.open=e,t},i.show=function(e){var r=this;return e=e===t||e,r.state.hidden=!e,r},i.subscribe=function(){var e=this;return e.events.subscribe.apply(e.events,arguments)},i.toggle=function(){var t=this;t.isGroupHeader()&&t.events.publish(e.toggleRow,t)},i.toggleZeroRow=function(e){var t=this,r=0,n=0;t.columns.forEach(function(e){e.isDataColumn()&&(r++,e.hasVal(0)&&n++)}),t.state.zeroRow=r===n&&e},i.destroy=function(){var e=this;e.columns.forEach(function(e){e.destroy()}),e.columns.flush(),e.state=t,e.config=t,e.events=t,e.columns=t,e.rowData=t,e.classNames=t},function(){return new n}}e.module("rpComplexGrid").factory("rpCgRowModel",["rpCgEventName","rpCgColumnModel",r])}(angular),function(e,t){"use strict";function r(r,n,i,o,s,a){function c(){this.init()}var u=c.prototype;return u.init=function(){var t=this,r=Object.keys(s);return t.rows=[],t.state={},t.gridData=[],t.rowHeightClass="large",t.readyTimer=e.noop,t.events=i().setEvents(r),t.busy=t.busyModel=a(),t.events.subscribe(s.sortBy,t.sortBy.bind(t)),t.events.subscribe(s.toggleRow,t.toggleRow.bind(t)),t.events.subscribe(s.updateVal,t.updateColumnVal.bind(t)),t},u.setBusyState=function(e){var t=this;return t.state.busy=e,t.busyModel[e?"busy":"off"](),t},u.setConfig=function(e){var t=this;return t.config=e,t.headers=e.getHeaders(),t.emptyMsg=e.getEmptyMsg(),t.headers.setEvents(t.events),t.columns=t.getRowConfigModel().getConfig(),t.highlightAlternateRow=e.getAlternateRow(),t},u.setData=function(t){var r=this;return t&&t.push&&(r.gridData=r.gridData.flush().concat(t),r.gridDataCopy=e.copy(r.gridData),r.build()),r},u.getFreeWidth=function(){return this.config.getFreeWidth()},u.getLockedWidth=function(){return this.config.getLockedWidth()},u.getMaxWidth=function(){return this.config.getMaxWidth()},u.getRowConfigModel=function(){return this.config.getRowConfigModel()},u.getTotalWidth=function(){return this.config.getTotalWidth()},u.build=function(){var e=this;return e.rows=[],e.gridData.forEach(function(t){var r=o(),n=e.getRowConfigModel();r.setConfig(n).setData(t),e.rows.push(r.setEvents(e.events).build())}),e.setColumnVal(),e.readyTimer1=n(e.publishDataReady.bind(e)),e.readyTimer2=n(e.publishDataReady.bind(e),500),e},u.delaySetColumns=function(){var e=this;return n.cancel(e.setColumnsTimer),e.setColumnsTimer=n(e.setColumns.bind(e),100),e},u.destroyRow=function(e){e.destroy()},u.edit=function(e){var r=this;return e=e===t||!!e,r.state.edit=e,r},u.flushChanges=function(){var e=this;return e.setData(e.gridDataCopy),e},u.flushData=function(){var e=this;return e.gridData=[],e.gridDataCopy=[],e},u.forEachRow=function(e){var t=this;return t.rows.forEach(e),t},u.publish=function(){var e=this;return e.events.publish.apply(e.events,arguments),e},u.publishDataReady=function(){var e=this;return e.publish(s.dataReady),e},u.saveChanges=function(){var t=this;return t.gridDataCopy=e.copy(t.gridData),t},u.setColumns=function(){var e=this;return e.rows.forEach(function(e){e.isVisible()&&e.activateColumns()}),e},u.setColumnVal=function(){var e=this;return e.rows.forEach(function(e){e.forEachColumn(function(e){e.setVal(e.getKeyData())})}),e},u.sortBy=function(e){var t,n=this,i=[],o=[],s=r("orderBy"),a=e.getSortDir(),c="rowData."+e.getKey();n.rows.forEach(function(e,r){var u=e.isAggregate(),l=e.isGroupHeader();if(t!=e.getGroupID()||l||u){if(t=e.getGroupID(),i.empty()||(i=s(i,c,a),o=o.concat(i),i=[]),l||u)return void o.push(e);i.push(e)}else i.push(e);r!=n.rows.length-1||i.empty()||(i=s(i,c,a),o=o.concat(i),i=[])}),n.rows=o},u.subscribe=function(){var e=this;return e.events.subscribe.apply(e.events,arguments)},u.toggleRow=function(e){if(e.isGroupHeader()){var t=this,r=!0,n=e.isOpen();e.open(!n),t.rows.forEach(function(t){if(t.is(e))return void(r=!1);if(!r){var i=t.isDescOf(e),o=t.isChildOf(e),s=t.isSiblingOf(e),a=t.isGroupHeader();n&&(s||i)?(t.show(!1),a&&t.open(!1)):(s||o&&a)&&t.show(),s||i||(r=!0)}}),t.publish(s.updateScroll),t.delaySetColumns()}},u.toggleZeroRows=function(e){var t=this;t.rows.forEach(function(t){t.toggleZeroRow(e)}),t.events.publish(s.updateColumns,10)},u.updateColumnVal=function(){var e=this;return e.rows.forEach(function(t){t.forEachColumn(function(r){var n=r.getMethodName();if(n){var i=e.config.getMethod(n);r.setVal(i(e.rows,t,r))}else r.setVal(r.getKeyData())})}),e},u.destroy=function(){var e=this;e.rows.forEach(e.destroyRow),n.cancel(e.readyTimer1),n.cancel(e.readyTimer2),n.cancel(e.setColumnsTimer),e.rows.flush(),e.events.destroy(),e.config.destroy(),e.gridData.flush(),e.headers.destroy(),e.rows=t,e.config=t,e.headers=t,e.gridData=t,e.emptyMsg=t},function(){return new c}}e.module("rpComplexGrid").factory("rpCgModel",["$filter","timeout","eventsManager","rpCgRowModel","rpCgEventName","rpBusyIndicatorModel",r])}(angular),function(e){"use strict";function t(){var e=this;e.updateLocked=function(e){return e.forEach(function(e){e.forEach(function(e){e.locked=e.state.locked,delete e.state})}),e},e.getStates=function(e){var t=[];return e.forEach(function(e){t.push(e.state)}),t},e.assemble=function(t,r){e.updateLocked(r).forEach(function(r){var n=0;r.forEach(function(r){var i=parseInt(r.colspan,10),o=t.slice(n,n+i);n+=i,delete r.colspan,r.subColumnStates=e.getStates(o)}),n=0})}}e.module("rpComplexGrid").service("rpCgGroupHeadersSvc",[t])}(angular);