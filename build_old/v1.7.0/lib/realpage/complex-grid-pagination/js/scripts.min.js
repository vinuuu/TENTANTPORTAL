!function(e){"use strict";function t(){function e(e,t,a){var n={},r=e.model;n.init=function(){e.gridPagination=n,n.destWatch=e.$on("$destroy",n.destroy)},n.goToPage=function(e){e.active||r.goToPage(e)},n.goToFirstPage=function(){r.goToFirstPage()},n.goToPrevPageSet=function(){r.goToPrevPageSet()},n.goToNextPageSet=function(){r.goToNextPageSet()},n.goToLastPage=function(){r.goToLastPage()},n.destroy=function(){n.destWatch(),n=void 0,a=void 0,t=void 0,e=void 0,r=void 0},n.init()}return{scope:{model:"="},link:e,restrict:"E",replace:!0,templateUrl:"realpage/complex-grid-pagination/templates/pagination.html"}}e.module("rpComplexGrid").directive("rpCgPagination",[t])}(angular),function(e){"use strict";function t(e){var t=this;t.invalidData=function(e){return!e||!e.records||!e.records.push},t.organizeData=function(a){var n,r,i,o=[],g=[];return t.invalidData(a)?g:(a.records.forEach(function(t,s){n=e(t),i?n.isGroupMateOf(i)?o.push(t):r<a.groupsPerPage?(r++,o.push(t)):(g.push(o),r=1,o=[t]):(r=1,o.push(t)),i=n}),g.push(o),g)}}e.module("rpComplexGrid").service("rpCgDataOrganizer",["rpCgPaginationRecordModel",t])}(angular),function(e,t){"use strict";function a(){return{gridReady:"gridReady",afterPageChange:"afterPageChange",beforePageChange:"beforePageChange"}}e.module("rpComplexGrid").factory("rpCgPaginationEvents",[a])}(angular),function(e,t){"use strict";function a(){function e(){this.init()}var a=e.prototype;return a.init=function(){this.data={}},a.setData=function(e){var t=this;return t.data=e,t},a.getID=function(){return this.data.rowID},a.getData=function(){return this.data},a.getGroupID=function(){return this.data.groupID},a.getLevel=function(){return this.data.level},a.hasID=function(e){return this.data.rowID==e},a.is=function(e){var t=this;return e.getID()==t.getID()},a.isAggregate=function(){var e=this;return"total"==e.data.rowType||"average"==e.data.rowType},a.isChildOf=function(e){var t=this;return t.getLevel()==e.getLevel()+1&&t.getGroupID()!=e.getGroupID()},a.isDescOf=function(e){var t=this;return t.getLevel()>e.getLevel()&&t.getGroupID()!=e.getGroupID()},a.isGroupHeader=function(){return"groupHeader"==this.data.rowType},a.isGroupMateOf=function(e){var t=this;return t.isChildOf(e)||t.isDescOf(e)||t.isSiblingOf(e)},a.isSiblingOf=function(e){var t=this;return t.getLevel()==e.getLevel()&&t.getGroupID()==e.getGroupID()},a.destroy=function(){this.data=t},function(t){return(new e).setData(t)}}e.module("rpComplexGrid").factory("rpCgPaginationRecordModel",[a])}(angular),function(e,t){"use strict";function a(e,a){function n(){this.init()}var r=n.prototype;return r.init=function(){var t=this;t.config={currentPage:0,pagesPerSet:2,groupsPerPage:1,currentPageSet:0},t.pages=[],t.dataCount=0,t.pageSets=[],t.isActive=!1,t.allowPrev=!1,t.allowNext=!1,t.allowLast=!1,t.allowFirst=!1,t.recordsGroups=[],t.events=e().setEvents(Object.keys(a))},r.setActive=function(e){var a=this;return a.isActive=e===t||e,a},r.setActivePage=function(){var e=this;return e.pageSets.forEach(function(t){t.forEach(function(t){t.active=t.num==e.config.currentPage})}),e},r.setControls=function(){var e=this;return e.allowFirst=e.isActive&&!(0===e.config.currentPageSet&&0===e.config.currentPage),e.allowPrev=e.isActive&&0!==e.config.currentPageSet,e.allowNext=e.isActive&&e.config.currentPageSet!=e.pageSets.length-1,e.allowLast=e.isActive&&!(e.config.currentPageSet===e.pageSets.length-1&&e.config.currentPage===e.pages.last().num),e},r.setCurrentPageSet=function(){var e=this;return e.pages=e.pageSets[e.config.currentPageSet]||[],e},r.setData=function(e){var t=this;return e&&e.push?(t.flushData(),t.recordsGroups=e,t.dataCount=e.length,t.setActive(e.length>0&&e.first().length>0).setPageSets().setCurrentPageSet().setActivePage().setControls().setGridData().goToFirstPage(),t):t},r.setGrid=function(e){var t=this;return t.grid=e,t},r.setGridData=function(){var e=this,t=e.recordsGroups[e.config.currentPage]||[];return e.grid.setData(t),e.events.publish(a.gridReady),e},r.setPageSets=function(){for(var e,t=this,a=[],n=0,r=0,i=t.recordsGroups.length;r<i;r++)e={num:r,active:!1},n<t.config.pagesPerSet?(n++,a.push(e)):(t.pageSets.push(a),n=1,a=[e]),r==i-1&&t.pageSets.push(a);return 0===t.recordsGroups.length&&t.pageSets.push([]),t},r.flushData=function(){var e=this;return e.pages=[],e.pageSets=[],e.grid.flushData(),e.recordsGroups=[],e},r.goToFirstPage=function(){var e=this;return e.allowFirst?(e.events.publish(a.beforePageChange),e.config.currentPageSet=0,e.pages=e.pageSets[e.config.currentPageSet],e.config.currentPage=e.pages.first().num,e.setActivePage().setControls().setGridData(),e.events.publish(a.afterPageChange),e):e},r.goToLastPage=function(){var e=this;return e.allowLast?(e.events.publish(a.beforePageChange),e.config.currentPageSet=e.pageSets.length-1,e.pages=e.pageSets[e.config.currentPageSet],e.config.currentPage=e.pages.last().num,e.setActivePage().setControls().setGridData(),e.events.publish(a.afterPageChange),e):e},r.goToNextPageSet=function(){var e=this;return e.allowNext?(e.events.publish(a.beforePageChange),e.config.currentPageSet++,e.config.currentPage+=e.config.pagesPerSet,e.config.currentPage>e.recordsGroups.length-1&&(e.config.currentPage=e.recordsGroups.length-1),e.pages=e.pageSets[e.config.currentPageSet],e.setActivePage().setControls().setGridData(),e.events.publish(a.afterPageChange),e):e},r.goToPage=function(e){var t=this;return t.config.currentPage==e.num?t:(t.events.publish(a.beforePageChange),t.config.currentPage=e.num,t.setActivePage().setControls().setGridData(),t.events.publish(a.afterPageChange),t)},r.goToPrevPageSet=function(){var e=this;return e.allowPrev?(e.events.publish(a.beforePageChange),e.config.currentPageSet--,e.config.currentPage-=e.config.pagesPerSet,e.config.currentPage<0&&(e.config.currentPage=0),e.pages=e.pageSets[e.config.currentPageSet],e.setActivePage().setControls().setGridData(),e.events.publish(a.afterPageChange),e):e},r.subscribe=function(){var e=this;return e.events.subscribe.apply(e.events,arguments)},r.destroy=function(){var e=this;e.events.destroy(),e.recordsGroups.flush(),e.grid=t,e.pages=t,e.events=t,e.pageSets=t,e.recordsGroups=t},function(){return new n}}e.module("rpComplexGrid").factory("rpCgPaginationModel",["eventsManager","rpCgPaginationEvents",a])}(angular),angular.module("rpComplexGrid").run(["$templateCache",function(e){e.put("realpage/complex-grid-pagination/templates/pagination.html",'<div class="rp-cg-pagination" ng-class="{active: model.isActive}"><div class="rp-cg-pagination-inner"><p class="rp-cg-pagination-displaying">Displaying {{model.config.currentPage + 1}} of {{model.dataCount}}</p><p class="rp-cg-pagination-controls prev"><span ng-class="{active: model.allowFirst}" ng-click="gridPagination.goToFirstPage()" class="rp-cg-pagination-control rp-cg-pagination-control-first"></span> <span ng-class="{active: model.allowPrev}" ng-click="gridPagination.goToPrevPageSet()" class="rp-cg-pagination-control rp-cg-pagination-control-prev"></span></p><ul class="rp-cg-pagination-pages"><li class="rp-cg-pagination-page" ng-repeat="page in model.pages" ng-class="{active: page.active}" ng-click="gridPagination.goToPage(page)">{{page.num + 1}}</li></ul><p class="rp-cg-pagination-controls"><span ng-class="{active: model.allowNext}" ng-click="gridPagination.goToNextPageSet()" class="rp-cg-pagination-control rp-cg-pagination-control-next"></span> <span ng-class="{active: model.allowLast}" ng-click="gridPagination.goToLastPage()" class="rp-cg-pagination-control rp-cg-pagination-control-last end"></span></p></div></div>')}]);