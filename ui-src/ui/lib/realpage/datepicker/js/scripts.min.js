angular.module("rpDatepicker",[]),function(e){"use strict";function a(e){e.put(n,t)}var t,n;n="templates/realpage/common/datepicker/datepicker.html",t="<div class='rp-datepicker' ng-style='model.styles'><span class='close' ng-click='model.hide()'>x</span><div class='header'><span class='prev' rp-stop-event='click' ng-click='model.prevMonth()' ng-class='{disabled: !model.allowPrevMonth()}'></span><span class='next' rp-stop-event='click' ng-click='model.nextMonth()' ng-class='{disabled: !model.allowNextMonth()}'></span><p class='month-name'>{{model.monthName()}}</p></div><div class='days-header'><p class='day-name'>S</p><p class='day-name'>M</p><p class='day-name'>T</p><p class='day-name'>W</p><p class='day-name'>T</p><p class='day-name'>F</p><p class='day-name'>S</p></div><div class='days'><div ng-repeat='day in model.days' class='day' ng-class='day.state' ng-click='model.select(day)'>{{day.text}}</div></div><div class='footer'><span class='prev-year' rp-stop-event='click' ng-click='model.prevYear()' ng-class='{disabled: !model.allowPrevYear()}'>{{model.year()-1}}</span><span class='next-year' rp-stop-event='click' ng-click='model.nextYear()' ng-class='{disabled: !model.allowNextYear()}'>{{model.year()+1}}</span><span class='current-year'>{{model.year()}}</span></div></div>",e.module("rpDatepicker").run(["$templateCache",a])}(angular),function(e){"use strict";function a(a,t,n){var r,l;return r={days:[],size:{},styles:{},events:n(),_data:{min:"",max:"",refDate:"",selDate:"",callerID:"",newCaller:!0}},l=r._data,r.update=function(e){return r.updateData(e).build()},r.updateData=function(a){return l.newCaller=l.callerID!=a.callerID,l.newCaller&&r.events.publish({name:"update"}),e.extend(l,a),r},r.build=function(){var e=l.refDate,a=t(e).endDay(),n=t(e).startDay();for(r.days.flush();!t(n).is(a);){var i=l.max&&t(n).isAfter(l.max),s=l.min&&t(n).isBefore(l.min),d=l.selDate&&t(n).is(l.selDate),c=s||i;r.days.push({moment:n.clone(),text:n.format("D"),state:{active:d,disabled:c,today:t(n).isToday(),current:t(n).isCurrentMonth(e)}}),n.add(1,"day")}return r},r.updateStyles=function(a){return e.extend(r.styles,a),r},r.updateSize=function(a){return e.extend(r.size,a),r},r.hide=function(){return r.styles.display="none",r.events.publish({name:"hide"}),r},r.show=function(){return r.styles.display="block",r.events.publish({name:"show"}),r},r.isHidden=function(){return"block"!=r.styles.display},r.prevMonth=function(){return l.refDate.add(-1,"month"),r.build()},r.prevYear=function(){return l.refDate.add(-1,"year"),r.build()},r.nextMonth=function(){return l.refDate.add(1,"month"),r.build()},r.nextYear=function(){return l.refDate.add(1,"year"),r.build()},r.allowPrevMonth=function(){if(!l.min||!l.refDate)return!0;var e=l.refDate.clone().add(-1,"month");return!t(e).isBefore(l.min)},r.allowPrevYear=function(){if(!l.min||!l.refDate)return!0;var e=l.refDate.clone().add(-1,"year");return!t(e).isBefore(l.min)},r.allowNextMonth=function(){if(!l.max||!l.refDate)return!0;var e=l.refDate.clone().add(1,"month");return!t(e).isAfter(l.max)},r.allowNextYear=function(){if(!l.max||!l.refDate)return!0;var e=l.refDate.clone().add(1,"year");return!t(e).isAfter(l.max)},r.monthName=function(){return l.refDate?l.refDate.format("MMMM"):""},r.year=function(){return l.refDate?parseInt(l.refDate.format("YYYY")):0},r.select=function(e){e.state.disabled||(l.selDate=e.moment.clone(),r.days.forEach(function(a){a.state.active=t(a.moment).is(e.moment)}),r.events.publish({name:"select",data:e.moment.format("x")}))},r.prevCaller=function(){return l.callerID},r}e.module("rpDatepicker").factory("rpDatepickerModel",["moment","rpDate","eventStream",a])}(angular),function(e){"use strict";function a(a){function t(t,n,r){var l,i={};i.init=function(){t.model=a,l=e.element("body"),a.events.subscribe(i.updateBinding),i.updateSize()},i.updateBinding=function(e){return"hide"==e.name?l.off("click.datepicker"):"updateSize"==e.name?i.updateSize():l.on("click.datepicker",i.hide),i},i.hide=function(){t.$apply(function(){a.hide()})},i.updateSize=function(){return a.updateSize({width:n.outerWidth(),height:n.outerHeight()}),i},i.init()}return{scope:{},link:t,restrict:"E",replace:!0,templateUrl:"templates/realpage/common/datepicker/datepicker.html"}}e.module("rpDatepicker").directive("rpDatepicker",["rpDatepickerModel",a])}(angular);