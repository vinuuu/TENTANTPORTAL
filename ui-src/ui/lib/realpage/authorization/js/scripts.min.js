angular.module("rpAuthorization",[]),function(e){"use strict";function r(e,r){function o(e,r,o){return{response:function(r){return r||e.when(r)},responseError:function(t){return 401===t.status&&(o.erase("authorization"),r.location.href="/ui/signin/#/"),e.reject(t)}}}e.factory("httpInterceptor",["$q","$window","rpCookie",o]),r.interceptors.push("httpInterceptor")}e.module("rpAuthorization").config(["$provide","$httpProvider",r])}(angular),function(e){"use strict";function r(e,r){var o=r.read("authorization");void 0!==o&&(o="Bearer "+o,e.defaults.headers.common.Authorization=o)}e.module("rpAuthorization").run(["$http","rpCookie",r])}(angular),function(e){"use strict";function r(e){i&&e.check()}var o,t,n,i,c;!function(){window.location.href.match(/\/ui\//)&&(o=!RealPage.cookie.read("authorization"),t=window.location.href.replace(/^[^\/]*\/{2}[^\/]+(\/.*)/g,"$1"),n=window.location.href.replace(/.*\/ui\/([^\/]+)\/.*/g,"$1"),c="/ui/signin/#/"==t||"/ui/signin/"==t,i="ui-library"!==n&&!c,o&&i&&!c&&(window.location.href="/ui/signin/#/"))}(),e.module("rpAuthorization").run(["authorization",r])}(angular),function(e){"use strict";function r(e,r,o,t,n){var i,c={},a={};return i={accessModelList:[]},a.ready=t(),c.events=a,c.isEmpty=function(){return 0===i.accessModelList.length},c.req=function(){var e=o.appUrl();return{method:"GET",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},url:"/api/core/common/access/productarea?ProductAreaRouteURI="+r.encodeURIComponent(e)}},c.success=function(e){var r=!1,o=e&&e.data&&e.data.productAreaAccessModel&&void 0!==e.data.productAreaAccessModel.userHasAccess;r=n.read("skipBlockingUrl"),o&&(e.data.blockingURL&&!r?e.data.blockingURL:e.data.productAreaAccessModel.userHasAccess&&(i=e.data.productAreaAccessModel,a.ready.publish()))},c.error=function(){},c.check=function(){var r=c.req();return e(r).then(c.success,c.error)},c.login=function(){r.location.href="/ui/signin/#/"},c.pageInfo=function(){var e=!1,r=o.fullUrl();return i.accessModelList.forEach(function(o){o.url==r&&(e=o)}),e},c.getActivityGUID=function(e){var r=!1;return i.accessModelList.forEach(function(o){var t=o.url.replace(/\//g,"\\/");t=new RegExp("^"+t+o.urlPartRegEx+"$"),e.match(t)&&(r=o.guid)}),r},c}e.module("rpAuthorization").factory("authorization",["$http","$window","location","eventStream","rpCookie",r])}(angular),function(e){"use strict";function r(r,o,t,n,i,c){var a,u,s={};return u={isFavoritable:!1,allowedToMakeHomePage:!1},s.req=function(){var e=n.fullUrl();return{method:"GET",url:"/api/core/common/access/activity?ActivityGUID="+i.getActivityGUID(e)}},s.check=function(){if(i.isEmpty())return a=r.defer(),i.events.ready.subscribe(s.check),a;var e=s.req();return o(e).then(s.success,s.error)},s.success=function(r){e.extend(u,r.data.activityAccessModel||{}),u.userHasAccess?s.resolve():s.accessDenied()},s.error=function(){s.resolve()},s.accessDenied=function(){},s.resolve=function(){a&&(a.resolve(),a=void 0)},s.allowSetHome=function(){return u.allowedToMakeHomePage},s.allowSetFav=function(){return u.isFavoritable},s}e.module("rpAuthorization").factory("userAccess",["$q","$http","$window","location","authorization","rpCookie",r])}(angular);