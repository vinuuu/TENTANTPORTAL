angular.module("rpFloatScroll",[]),function(e,t){"use strict";function r(r,i,o){function l(l,n,s){var c={};c.init=function(){l.floatScroll=c,c.setSizeBusy=!1,c.append().setupBar().setVis(),c.destWatch=l.$on("$destroy",c.destroy),c.sizeWatch=o.subscribe(c.delaySetSize),c.scrollWatch=i.subscribe(c.delaySetSize)},c.append=function(){return c.bar=e.element("<div class='rp-float-scrollbar'><div /></div>"),c.barCon=c.bar.children(),n.append(c.bar),c},c.setupBar=function(){return c.bar.on("scroll",c.onScroll),c.setSize(),c},c.show=function(){return c.bar.show(),c},c.hide=function(){return c.bar.hide(),c},c.onScroll=function(){var e=c.bar.scrollLeft();n.scrollLeft(e)},c.delaySetSize=function(){c.setSizeBusy||(c.setSizeBusy=!0,c.sizeTimer=r(c.setSize,150))},c.setVis=function(){var e=n.scrollLeft(),t=o.getSize().height,r=i.getScrollTop(),l=t+r,s=r+n.get(0).getBoundingClientRect().top,a=s+n.outerHeight(),u=l>s&&l<a;return c[u?"show":"hide"]().bar.scrollLeft(u?e:0),c},c.setSize=function(){var e={left:n.offset().left,width:n.outerWidth()};c.bar.css(e),c.setSizeBusy=!1,c.barCon.width(n.get(0).scrollWidth),c.setVis()},c.destroy=function(){c.sizeWatch(),c.destWatch(),c.bar.remove(),c.scrollWatch(),r.cancel(c.sizeTimer),l.floatScroll=t,c=t,n=t,l=t},c.init()}return{link:l,restrict:"C"}}e.module("rpFloatScroll").directive("rpFloatScroll",["timeout","windowScroll","windowSize",r])}(angular);