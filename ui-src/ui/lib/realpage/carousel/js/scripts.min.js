!function(t,e){"use strict";var n={bindings:{model:"="},controller:["$scope","windowSize",function(t,e){var n=this;n.$onInit=function(){n.winSizeWatch=e.subscribe(n.onWinSizeChange)},n.$onDestroy=function(){n.winSizeWatch(),n.model.destroy()},n.onWinSizeChange=function(){t.$apply(n.resetModel)},n.resetModel=function(){n.model.reset()},n.getState=function(){return n.model.getState()},n.setScreen=function(t){n.model.setScreen(t)},n.setSlider=function(t){n.model.setSlider(t)},n.scrollLeft=function(){n.model.scrollLeft()},n.scrollRight=function(){n.model.scrollRight()}}],templateUrl:"realpage/carousel/templates/carousel.html"};t.module("rpCarousel").component("rpCarousel",n)}(angular),function(t,e){"use strict";var n={bindings:{model:"="},controller:["$scope","$compile","$element","timeout",function(t,e,n,r){var i=this;i.$onInit=function(){i.model.hasTemplateUrl()&&r(i.updateUnitContent,50)},i.updateUnitContent=function(){n.html(i.getContent())},i.getContent=function(){var n=t.$new(),r=i.model.getTemplateContent();return n.model=i.model,e(r)(t)}}],templateUrl:"realpage/carousel/templates/carousel-unit.html"};t.module("rpCarousel").component("rpCarouselUnit",n)}(angular),function(t,e){"use strict";t.module("rpCarousel").directive("rpCarouselScreen",[function(){return{link:function(t,n,r){var i={},l="scroll.rpCarouselScreen";i.init=function(){t.$ctrl.setScreen(i),i.destWatch=t.$on("$destroy",i.destroy)},i.setHeight=function(t){n.height(t),n.parent().height(t)},i.getScrollLeft=function(){return n.scrollLeft()},i.getWidth=function(){return n.width()},i.scrollLeft=function(t){n.animate({scrollLeft:t},200)},i.onScroll=function(t){n.on(l,t)},i.destroy=function(){i.destWatch(),n.off(l),i=e,r=e,n=e,t=e},i.init()},restrict:"C"}}])}(angular),function(t,e){"use strict";t.module("rpCarousel").directive("rpCarouselSlider",[function(){return{link:function(t,n,r){var i={};i.init=function(){t.$ctrl.setSlider(i),i.destWatch=t.$on("$destroy",i.destroy)},i.setWidth=function(t){n.width(t)},i.destroy=function(){i.destWatch(),i=e,r=e,n=e,t=e},i.init()},restrict:"C"}}])}(angular),function(t,e){"use strict";t.module("rpCarousel").factory("rpCarouselModel",["timeout","rpCarouselUnitModel",function(n,r){function i(){this.init()}var l=i.prototype;return l.init=function(){var t=this;t.data={units:[],unitWidth:250,unitHeight:80,unitSeparation:20},t.units=[],t.state={},t.slider=e,t.screen=e,t.scrollLeftEnabled=!1,t.scrollRightEnabled=!1},l.getState=function(){return this.state},l.getStopIndex=function(t){var e=this,n=!1,r={},i=t.length,l=e.screen.getScrollLeft();return t.forEach(function(e,o){n||(l===e?(n=!0,r={prev:o-1<0?0:o-1,next:o+1===i?o:o+1}):e<l&&l<t[o+1]&&(n=!0,r={prev:o,next:o+1}))}),r},l.getNextStop=function(){var t=this,e=t.getStops();return e[t.getStopIndex(e).next]},l.getPrevStop=function(){var t=this,e=t.getStops();return e[t.getStopIndex(e).prev]},l.getSliderWidth=function(){var t=this,e=t.units.length,n=t.data.unitWidth;return(n+t.data.unitSeparation)*(e-1)+n},l.getStops=function(){for(var t=this,e=0,n=[e],r=t.getStopWidth(),i=t.getSliderWidth()-t.screen.getWidth();e<i;)e+=r,n.push(e<i?e:i);return n},l.getStopWidth=function(){var t=this,e=t.screen.getWidth(),n=t.data.unitWidth+t.data.unitSeparation;return n*Math.floor(e/n)},l.getUnitStyle=function(t){var e=this,n=e.units.length===t+1?0:e.data.unitSeparation;return{width:e.data.unitWidth,marginRight:n,height:e.data.unitHeight}},l.initContainers=function(){var t=this;return t.initScreen().initSlider().updateControls(),t.state.ready=!0,t},l.initControls=function(){var t=this;return t.scrollLeftEnabled=t.getSliderWidth()>t.screen.getWidth(),t},l.initScreen=function(){var t=this;return t.screen.setHeight(t.data.unitHeight),t},l.initSlider=function(){var t=this;return t.slider.setWidth(t.getSliderWidth()),t},l.onScroll=function(){var t=this;return t.scrollTimer||(t.scrollTimer=n(t.updateControls.bind(t),200)),t},l.updateControls=function(){var t=this,n=t.getStops(),r=t.screen.getScrollLeft();return t.scrollTimer=e,t.scrollRightEnabled=0!==r,t.scrollLeftEnabled=n.length>1&&r!==n[n.length-1],t},l.reset=function(){var t=this;return t.screen.scrollLeft(0),t.updateControls(),t},l.scrollLeft=function(){var t=this,e=t.getNextStop();return t.screen.scrollLeft(e),t},l.scrollRight=function(){var t=this,e=t.getPrevStop();return t.screen.scrollLeft(e),t},l.setData=function(e){var i=this;return i.data=t.extend(i.data,e||{}),i.units=(i.data.units||[]).map(function(e){return e=t.extend({templateUrl:i.data.templateUrl},e),r(e)}),n(i.initContainers.bind(i),100),i},l.setScreen=function(t){var e=this;return e.screen=t,e.screen.onScroll(e.onScroll.bind(e)),e},l.setSlider=function(t){var e=this;return e.slider=t,e},l.destroyUnit=function(t){t.destroy()},l.destroy=function(){var t=this;t.units&&(n.cancel(t.scrollTimer),t.units.forEach(t.destroyUnit),t.data=e,t.state=e,t.units=e,t.screen=e,t.slider=e,t.scrollTimer=e,t.scrollLeftEnabled=e,t.scrollRightEnabled=e)},function(t){return(new i).setData(t)}}])}(angular),function(t,e){"use strict";var n=1;t.module("rpCarousel").factory("rpCarouselUnitModel",["$templateCache",function(t){function r(){this.init()}var i=r.prototype;return i.init=function(){var t=this;t.data={},t.carouselId=n++},i.setData=function(t){var e=this;return e.data=t||e.data,e},i.getData=function(){return this.data},i.getTemplateUrl=function(){return this.data.templateUrl},i.getTemplateContent=function(){var e=this;return t.get(e.data.templateUrl)},i.hasTemplateUrl=function(){var t=this;return!!t.data.templateUrl&&t.templateUrlIsValid()},i.templateUrlIsValid=function(){var n=this.data.templateUrl,r=t.get(n)!==e;return r},i.destroy=function(){this.data=e},function(t){return(new r).setData(t)}}])}(angular),angular.module("rpCarousel").run(["$templateCache",function(t){t.put("realpage/carousel/templates/carousel-unit.html",'<div class="rp-carousel-unit">Carousel Unit #{{$ctrl.model.carouselId}}</div>'),t.put("realpage/carousel/templates/carousel.html",'<div class="rp-carousel" ng-class="$ctrl.getState()"><span ng-click="$ctrl.scrollLeft()" class="rp-carousel-scroll-left" ng-if="$ctrl.model.scrollLeftEnabled"></span> <span ng-click="$ctrl.scrollRight()" class="rp-carousel-scroll-right" ng-if="$ctrl.model.scrollRightEnabled"></span><div class="rp-carousel-screen-wrap"><div class="rp-carousel-screen" ng-style="carouselScreen.getStyle()"><div class="rp-carousel-slider"><rp-carousel-unit model="unit" ng-repeat="unit in $ctrl.model.units" ng-style="$ctrl.model.getUnitStyle($index)"></rp-carousel-unit></div></div></div></div>')}]);